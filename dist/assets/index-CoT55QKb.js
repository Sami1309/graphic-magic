(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(c){if(c.ep)return;c.ep=!0;const l=r(c);fetch(c.href,l)}})();var lo="rgb",On="rgba",fo="hsl",po="hsla",as=[lo,On,fo,po],je="function",Er="property",_n="array",He="object",ho="string",ss="number",Re="undefined",wr=typeof window!==Re,te=typeof document!==Re&&document,Di=["webkit","ms","moz","o"],In=function(s){if(!te)return"";var o=(te.body||te.documentElement).style,r=Di.length;if(typeof o[s]!==Re)return s;for(var i=0;i<r;++i){var c="-"+Di[i]+"-"+s;if(typeof o[c]!==Re)return c}return""},Ai=In("transform"),Zr=In("filter"),Ye=In("animation"),cs=Ye.replace("animation","keyframes"),us=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ls(){for(var s=0,o=0,r=arguments.length;o<r;o++)s+=arguments[o].length;for(var i=Array(s),c=0,o=0;o<r;o++)for(var l=arguments[o],h=0,m=l.length;h<m;h++,c++)i[c]=l[h];return i}function vo(s,o,r,i){return(s*i+o*r)/(r+i)}function Bt(s){return typeof s===Re}function Tt(s){return s&&typeof s===He}function jt(s){return Array.isArray(s)}function Ot(s){return typeof s===ho}function Mt(s){return typeof s===je}function fs(s,o){var r=s===""||s==" ",i=o===""||o==" ";return i&&r||s===o}function go(s,o,r,i,c){var l=Pn(s,o,r);return l?r:ps(s,o,r+1,i,c)}function Pn(s,o,r){if(!s.ignore)return null;var i=o.slice(Math.max(r-3,0),r+3).join("");return new RegExp(s.ignore).exec(i)}function ps(s,o,r,i,c){for(var l=function(E){var S=o[E].trim();if(S===s.close&&!Pn(s,o,E))return{value:E};var _=E,A=mr(c,function(k){var I=k.open;return I===S});if(A&&(_=go(A,o,E,i,c)),_===-1)return h=E,"break";E=_,h=E},h,m=r;m<i;++m){var b=l(m);if(m=h,typeof b=="object")return b.value;if(b==="break")break}return-1}function Le(s,o){var r=Ot(o)?{separator:o}:o,i=r.separator,c=i===void 0?",":i,l=r.isSeparateFirst,h=r.isSeparateOnlyOpenClose,m=r.isSeparateOpenClose,b=m===void 0?h:m,E=r.openCloseCharacters,S=E===void 0?us:E,_=S.map(function(w){var K=w.open,Y=w.close;return K===Y?K:K+"|"+Y}).join("|"),A="(\\s*"+c+"\\s*|"+_+"|\\s+)",k=new RegExp(A,"g"),I=s.split(k).filter(function(w){return w&&w!=="undefined"}),R=I.length,N=[],B=[];function j(){return B.length?(N.push(B.join("")),B=[],!0):!1}for(var W=function(w){var K=I[w].trim(),Y=w,at=mr(S,function(Z){var et=Z.open;return et===K}),pt=mr(S,function(Z){var et=Z.close;return et===K});if(at){if(Y=go(at,I,w,R,S),Y!==-1&&b)return j()&&l||(N.push(I.slice(w,Y+1).join("")),w=Y,l)?(U=w,"break"):(U=w,"continue")}else if(pt&&!Pn(pt,I,w)){var q=ls(S);return q.splice(S.indexOf(pt),1),{value:Le(s,{separator:c,isSeparateFirst:l,isSeparateOnlyOpenClose:h,isSeparateOpenClose:b,openCloseCharacters:q})}}else if(fs(K,c)&&!h)return j(),l?(U=w,"break"):(U=w,"continue");Y===-1&&(Y=R-1),B.push(I.slice(w,Y+1).join("")),w=Y,U=w},U,X=0;X<R;++X){var ct=W(X);if(X=U,typeof ct=="object")return ct.value;if(ct==="break")break}return B.length&&N.push(B.join("")),N}function hs(s){return Le(s,"")}function ce(s){return Le(s,",")}function mo(s){var o=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(s);return!o||o.length<4?{}:{prefix:o[1],value:o[2],suffix:o[3]}}function dn(s){var o=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(s);if(!o)return{prefix:"",unit:"",value:NaN};var r=o[1],i=o[2],c=o[3];return{prefix:r,unit:c,value:parseFloat(i)}}function vn(s){return s.replace(/[\s-_]+([^\s-_])/g,function(o,r){return r.toUpperCase()})}function yo(s,o){return o===void 0&&(o="-"),s.replace(/([a-z])([A-Z])/g,function(r,i,c){return""+i+o+c.toLowerCase()})}function Jr(s){return[].slice.call(s)}function ki(){return Date.now?Date.now():new Date().getTime()}function Mn(s,o,r){r===void 0&&(r=-1);for(var i=s.length,c=0;c<i;++c)if(o(s[c],c,s))return c;return r}function mr(s,o,r){var i=Mn(s,o);return i>-1?s[i]:r}var ji=function(){var s=ki(),o=wr&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return o?o.bind(window):function(r){var i=ki(),c=setTimeout(function(){r(i-s)},1e3/60);return c}}(),ds=function(){var s=wr&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return s?s.bind(window):function(o){clearTimeout(o)}}();function ue(s){return Object.keys(s)}function Fe(s,o){o===void 0&&(o=[]),s.sort(function(r,i){var c=o.indexOf(r),l=o.indexOf(i);return l===-1&&c===-1?0:c===-1?1:l===-1?-1:c-l})}function vs(s,o,r){return Math.max(o,Math.min(s,r))}function gs(s){return s.replace("#","")}function Ri(s){var o=gs(s),r=parseInt(o.substring(0,2),16),i=parseInt(o.substring(2,4),16),c=parseInt(o.substring(4,6),16),l=parseInt(o.substring(6,8),16)/255;return isNaN(l)&&(l=1),[r,i,c,l]}function ms(s){var o=s.charAt(1),r=s.charAt(2),i=s.charAt(3),c=s.charAt(4),l=["#",o,o,r,r,i,i,c,c];return l.join("")}function ys(s){var o,r=s[0],i=s[1],c=s[2];r<0&&(r+=Math.floor((Math.abs(r)+360)/360)*360),r%=360;var l=(1-Math.abs(2*c-1))*i,h=l*(1-Math.abs(r/60%2-1)),m=c-l/2,b;return r<60?b=[l,h,0]:r<120?b=[h,l,0]:r<180?b=[0,l,h]:r<240?b=[0,h,l]:r<300?b=[h,0,l]:r<360?b=[l,0,h]:b=[0,0,0],[Math.round((b[0]+m)*255),Math.round((b[1]+m)*255),Math.round((b[2]+m)*255),(o=s[3])!==null&&o!==void 0?o:1]}function bo(s){if(s.charAt(0)==="#")return s.length===4||s.length===5?Ri(ms(s)):Ri(s);if(s.indexOf("(")!==-1){var o=mo(s),r=o.prefix,i=o.value;if(!r||!i)return;var c=ce(i),l=[0,0,0,1],h=c.length;switch(r){case lo:case On:for(var m=0;m<h;++m)l[m]=parseFloat(c[m]);return l;case fo:case po:for(var m=0;m<h;++m)c[m].indexOf("%")!==-1?l[m]=parseFloat(c[m])/100:l[m]=parseFloat(c[m]);return ys(l)}}}function yr(s,o){return te?o?te.querySelectorAll(s):te.querySelector(s):o?[]:null}function bs(s,o){return s.classList?s.classList.contains(o):!!s.className.match(new RegExp("(\\s|^)"+o+"(\\s|$)"))}function Li(s,o){s.classList?s.classList.add(o):s.className+=" "+o}function lr(s,o){if(s.classList)s.classList.remove(o);else{var r=new RegExp("(\\s|^)"+o+"(\\s|$)");s.className=s.className.replace(r," ")}}function xs(s,o){if(!s||!o||!o.length)return{};var r;if(s instanceof Element)r=s;else if(s.length)r=s[0];else return{};for(var i={},c=ws(r).getComputedStyle(r),l=o.length,h=0;h<l;++h)i[o[h]]=c[o[h]];return i}function fr(s,o,r,i){s.addEventListener(o,r,i)}function pr(s,o,r,i){s.removeEventListener(o,r,i)}function Es(s){return s?.ownerDocument||te}function ws(s){var o;return((o=s?.ownerDocument)===null||o===void 0?void 0:o.defaultView)||window}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gn=function(){return gn=Object.assign||function(o){for(var r,i=1,c=arguments.length;i<c;i++){r=arguments[i];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(o[l]=r[l])}return o},gn.apply(this,arguments)};function Ss(){for(var s=0,o=0,r=arguments.length;o<r;o++)s+=arguments[o].length;for(var i=Array(s),c=0,o=0;o<r;o++)for(var l=arguments[o],h=0,m=l.length;h<m;h++,c++)i[c]=l[h];return i}var Sr=function(){function s(){this._events={}}var o=s.prototype;return o.on=function(r,i){if(Tt(r))for(var c in r)this.on(c,r[c]);else this._addEvent(r,i,{});return this},o.off=function(r,i){if(!r)this._events={};else if(Tt(r))for(var c in r)this.off(c);else if(!i)this._events[r]=[];else{var l=this._events[r];if(l){var h=Mn(l,function(m){return m.listener===i});h>-1&&l.splice(h,1)}}return this},o.once=function(r,i){var c=this;return i&&this._addEvent(r,i,{once:!0}),new Promise(function(l){c._addEvent(r,l,{once:!0})})},o.emit=function(r,i){var c=this;i===void 0&&(i={});var l=this._events[r];if(!r||!l)return!0;var h=!1;return i.eventType=r,i.stop=function(){h=!0},i.currentTarget=this,Ss(l).forEach(function(m){m.listener(i),m.once&&c.off(r,m.listener)}),!h},o.trigger=function(r,i){return i===void 0&&(i={}),this.emit(r,i)},o._addEvent=function(r,i,c){var l=this._events;l[r]=l[r]||[];var h=l[r];h.push(gn({listener:i},c))},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ts(s){var o=typeof Symbol=="function"&&Symbol.iterator,r=o&&s[o],i=0;if(r)return r.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function Os(s,o){var r=typeof Symbol=="function"&&s[Symbol.iterator];if(!r)return s;var i=r.call(s),c,l=[],h;try{for(;(o===void 0||o-- >0)&&!(c=i.next()).done;)l.push(c.value)}catch(m){h={error:m}}finally{try{c&&!c.done&&(r=i.return)&&r.call(i)}finally{if(h)throw h.error}}return l}function Qr(){for(var s=[],o=0;o<arguments.length;o++)s=s.concat(Os(arguments[o]));return s}var _e=function(s){return typeof s>"u"},zi=function(){function s(r,i){var c,l;if(this._canceled=!1,i)try{for(var h=Ts(Object.keys(i)),m=h.next();!m.done;m=h.next()){var b=m.value;this[b]=i[b]}}catch(E){c={error:E}}finally{try{m&&!m.done&&(l=h.return)&&l.call(h)}finally{if(c)throw c.error}}this.eventType=r}var o=s.prototype;return o.stop=function(){this._canceled=!0},o.isCanceled=function(){return this._canceled},s}(),_s=function(){function s(){this._eventHandler={}}var o=s.prototype;return o.trigger=function(r){for(var i=[],c=1;c<arguments.length;c++)i[c-1]=arguments[c];var l=r instanceof zi?r.eventType:r,h=Qr(this._eventHandler[l]||[]);return h.length<=0?this:(r instanceof zi?(r.currentTarget=this,h.forEach(function(m){m(r)})):h.forEach(function(m){m.apply(void 0,Qr(i))}),this)},o.once=function(r,i){var c=this;if(typeof r=="object"&&_e(i)){var l=r;for(var h in l)this.once(h,l[h]);return this}else if(typeof r=="string"&&typeof i=="function"){var m=function(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];i.apply(void 0,Qr(b)),c.off(r,m)};this.on(r,m)}return this},o.hasOn=function(r){return!!this._eventHandler[r]},o.on=function(r,i){if(typeof r=="object"&&_e(i)){var c=r;for(var l in c)this.on(l,c[l]);return this}else if(typeof r=="string"&&typeof i=="function"){var h=this._eventHandler[r];_e(h)&&(this._eventHandler[r]=[],h=this._eventHandler[r]),h.push(i)}return this},o.off=function(r,i){if(_e(r))return this._eventHandler={},this;if(_e(i)){if(typeof r=="string")return delete this._eventHandler[r],this;var c=r;for(var l in c)this.off(l,c[l]);return this}var h=this._eventHandler[r];if(h){for(var m=h.length,b=0;b<m;++b)if(h[b]===i){h.splice(b,1),m<=1&&delete this._eventHandler[r];break}}return this},s.VERSION="3.0.5",s}();function xo(s){return Object.keys(s)}function Is(s){return typeof s=="object"}function Ps(s){return typeof s=="function"}var mn="__observers__",Ms="__computed__",tn=1,en="__CFCS_DETECTED_DEPENDENCIES__",yn=function(s,o){return yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])},yn(s,o)};function Cs(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");yn(s,o);function r(){this.constructor=s}s.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}function Cn(){Object[en]=Object[en]||{};var s=Object[en];return s[tn]=s[tn]||[],s[tn]}function Fs(){var s=Cn();return s[s.length-1]}function Ds(s){var o=Cn(),r=[],i={host:s,observers:r,push:function(c){s!==c&&r.indexOf(c)===-1&&r.push(c)}};return o.push(i),i}function As(){var s=Cn();return s.pop()}var Eo=function(){function s(r){this._emitter=new _s,this._current=r}var o=s.prototype;return Object.defineProperty(o,"current",{get:function(){var r=Fs();return r?.push(this),this._current},set:function(r){this._setCurrent(r)},enumerable:!1,configurable:!0}),o.subscribe=function(r){return this.current,this._emitter.on("update",r),this},o.unsubscribe=function(r){return this._emitter.off("update",r),this},o._setCurrent=function(r){var i=this._current,c=r!==i;this._current=r,c&&this._emitter.trigger("update",r,i)},o.toString=function(){return"".concat(this.current)},o.valueOf=function(){return this.current},s}(),ks=function(s){Cs(o,s);function o(i){var c=s.call(this)||this;return c._computedCallback=i,c._registered=[],c._onCheckUpdate=function(){c._setCurrent(c.current)},c._current=c.current,c}var r=o.prototype;return Object.defineProperty(r,"current",{get:function(){var i=this;Ds(this);var c=this._computedCallback(),l=As();return this._registered.forEach(function(h){h.unsubscribe(i._onCheckUpdate)}),l.observers.forEach(function(h){h.subscribe(i._onCheckUpdate)}),this._registered=l.observers,c},enumerable:!1,configurable:!0}),o}(Eo);function Ni(s,o,r){r===void 0&&(r=o);var i={configurable:!0,get:function(){return De(this,r).current},set:function(c){De(this,r,c).current=c}};Object.defineProperty(s,o,i),r!==o&&Object.defineProperty(s,r,{configurable:!0,get:function(){return De(this,r).current}})}function js(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return s.length>1?Ni(s[0],s[1]):function(r,i){return Ni(r,i,s[0])}}function Rs(s){s.subscribe=function(o,r){this[o],De(this,o).subscribe(r)},s.unsubscribe=function(o,r){var i=this;if(!o){xo(Fn(this)).forEach(function(c){i.unsubscribe(c)});return}o in this&&De(this,o).unsubscribe(r)}}function wo(s,o){var r=Ps(s)?s():s,i={};return So(i),xo(r).forEach(function(c){var l=r[c];To(l)?Ui(i,c,l):Ui(i,c,ze(l)),js(c)(i,c)}),Rs(i),i}function Ls(s){return wo(s)}function zs(s){return wo(s)}function ze(s){return new Eo(s)}function rn(s){return new ks(s)}function So(s){var o={};return Object.defineProperty(s,mn,{get:function(){return o}}),o}function Fn(s,o){var r,i;s[mn]||So(s);var c=s[mn];{var l=(i=(r=s?.constructor)===null||r===void 0?void 0:r.prototype)===null||i===void 0?void 0:i[Ms];l&&l.forEach(function(h){!(h in c)&&h in s&&s[h]})}return c}function De(s,o,r){var i=Fn(s);return i[o]||(i[o]=ze(r)),i[o]}function Ui(s,o,r){var i=Fn(s);i[o]=r}function To(s){return s&&Is(s)&&"current"in s&&"subscribe"in s&&"unsubscribe"in s}function kt(s,o,r){if(r||arguments.length===2)for(var i=0,c=o.length,l;i<c;i++)(l||!(i in o))&&(l||(l=Array.prototype.slice.call(o,0,i)),l[i]=o[i]);return s.concat(l||Array.prototype.slice.call(o))}var le=function(){function s(o){this.separator=o,this.orderMap={}}return s.prototype.getFullName=function(o){return o.join(this.separator)},s.prototype.get=function(o){return this.orderMap[this.getFullName(o)]},s.prototype.hasName=function(o){var r=o.length;if(!r)return!1;var i=o[r-1],c=this.get(o.slice(0,r-1));return c?c.indexOf(i)>=0:!1},s.prototype.gets=function(o,r){r===void 0&&(r=!0);var i=[],c=this;function l(h,m){var b=c.get(h);if(b)return b.forEach(function(E){var S=kt(kt([],m,!0),[E],!1),_=l(kt(kt([],h,!0),[E],!1),S);(!_||!_.length)&&i.push(kt(kt([],m,!0),[E],!1))}),b}return l(o,r?o:[]),i},s.prototype.set=function(o,r){var i=this;return o.forEach(function(c,l){i.addName(o.slice(0,l),c)}),this.orderMap[this.getFullName(o)]=r,r},s.prototype.add=function(o){var r=o.length;return r?this.addName(o.slice(0,-1),o[r-1]):[]},s.prototype.addName=function(o,r){var i=this.get(o)||this.set(o,[]);return i.indexOf(r)===-1&&i.push(r),i},s.prototype.findIndex=function(o,r){var i=this.orderMap[this.getFullName(o)];return i?i.indexOf(r):-1},s.prototype.remove=function(o){var r=this.getFullName(o),i=this.orderMap;for(var c in i)c.indexOf(r)===0&&delete i[c];var l=o.length;if(l){var h=o.slice(0,-1),m=o[l-1];this.splice(h,this.findIndex(h,m),1)}return this},s.prototype.filter=function(o,r,i){i===void 0&&(i=!0);var c=this.gets(o,i).filter(r),l=new s(this.separator),h=i?[]:o;return c.forEach(function(m){l.add(kt(kt([],h,!0),m,!0))}),l},s.prototype.splice=function(o,r,i){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];var h=this.get(o)||this.set(o,[]);return h.splice.apply(h,kt([r,i],c,!1)),this},s.prototype.clear=function(){this.orderMap={}},s.prototype.setObject=function(o){var r=this.orderMap;for(var i in o)r[i]=o[i].slice()},s.prototype.getObject=function(){var o={},r=this.orderMap;for(var i in r)o[i]=r[i].slice();return o},s.prototype.clone=function(){var o=new s(this.separator);return o.setObject(o.orderMap),o},s}();function Ns(s){for(var o=5381,r=s.length;r;)o=o*33^s.charCodeAt(--r);return o>>>0}var Us=Ns;function $s(s){return Us(s).toString(36)}function Bs(s){if(s&&s.getRootNode){var o=s.getRootNode();if(o.nodeType===11)return o}}function Gs(s,o,r){return r.original?o:o.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(i,c){var l=c.trim();return(l?ce(l):[""]).map(function(h){var m=h.trim();return m.indexOf("@")===0?m:m.indexOf(":global")>-1?m.replace(/\:global/g,""):m.indexOf(":host")>-1?"".concat(m.replace(/\:host/g,".".concat(s))):m?".".concat(s," ").concat(m):".".concat(s)}).join(", ")+" {"})}function qs(s,o,r,i,c){var l=Es(i),h=l.createElement("style");return h.setAttribute("type","text/css"),h.setAttribute("data-styled-id",s),h.setAttribute("data-styled-count","1"),r.nonce&&h.setAttribute("nonce",r.nonce),h.innerHTML=Gs(s,o,r),(c||l.head||l.body).appendChild(h),h}function Oo(s){var o="rCS"+$s(s);return{className:o,inject:function(r,i){i===void 0&&(i={});var c=Bs(r),l=(c||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(o,'"]'));if(!l)l=qs(o,s,i,r,c);else{var h=parseFloat(l.getAttribute("data-styled-count"))||0;l.setAttribute("data-styled-count","".concat(h+1))}return{destroy:function(){var m,b=parseFloat(l.getAttribute("data-styled-count"))||0;b<=1?(l.remove?l.remove():(m=l.parentNode)===null||m===void 0||m.removeChild(l),l=null):l.setAttribute("data-styled-count","".concat(b-1))}}}}}var bn=function(s,o){return bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])},bn(s,o)};function Tr(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");bn(s,o);function r(){this.constructor=s}s.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}var Ne=function(){return Ne=Object.assign||function(o){for(var r,i=1,c=arguments.length;i<c;i++){r=arguments[i];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(o[l]=r[l])}return o},Ne.apply(this,arguments)};function Hs(s,o,r,i){var c=arguments.length,l=c<3?o:i===null?i=Object.getOwnPropertyDescriptor(o,r):i,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(s,o,r,i);else for(var m=s.length-1;m>=0;m--)(h=s[m])&&(l=(c<3?h(l):c>3?h(o,r,l):h(o,r))||l);return c>3&&l&&Object.defineProperty(o,r,l),l}function lt(s,o,r){if(r||arguments.length===2)for(var i=0,c=o.length,l;i<c;i++)(l||!(i in o))&&(l||(l=Array.prototype.slice.call(o,0,i)),l[i]=o[i]);return s.concat(l||Array.prototype.slice.call(o))}function _o(s,o,r){var i=1-r;return r*r*r+3*r*r*i*o+3*r*i*i*s}function Ys(s,o,r){for(var i=r,c=r,l=1;Math.abs(l)>1/1e3;){if(c=_o(s,o,i),l=c-r,Math.abs(l)<1/1e3)return i;i-=l/2}return i}function re(s,o,r,i){var c=function(l){var h=Ys(s,r,vs(l,0,1));return _o(o,i,h)};return c.easingName="cubic-bezier(".concat(s,",").concat(o,",").concat(r,",").concat(i,")"),c}function Dn(s,o){var r=function(i){var c=1/s;return i>=1?1:(o==="start"?c:0)+Math.floor(i/c)*c};return r.easingName="steps(".concat(s,", ").concat(o,")"),r}var Vs=Dn(1,"start"),Ws=Dn(1,"end"),Xs=re(0,0,1,1),Ks=re(.25,.1,.25,1),Zs=re(.42,0,1,1),Js=re(0,0,.58,1),Qs=re(.42,0,.58,1),Ie,$i="__SCENEJS_",Bi="data-scene-id",qt="animation-timing-function",Io={transform:{},filter:{},attribute:{},html:!0},br={easing:[qt]},tc=(Ie={},Ie[qt]=!0,Ie.contents=!0,Ie.html=!0,Ie),Gi=1e6,Pe=1e-6,Pt="duration",Or="fillMode",Ve="direction",It="iterationCount",wt="delay",Ue="easing",Ht="playSpeed",fe="easingName",ec="iterationTime",Xt="paused",Po="ended",rc="timeupdate",Mo="play",$e="running",hr="iteration",ae="startAnimation",dr="pauseAnimation",xn="alternate",Co="reverse",En="alternate-reverse",nc="normal",Ae="infinite",Gt="playState",An="playCSS",nn="prevTime",$t="tickTime",gr="currentTime",St="selector",qi="transform",Hi={linear:Xs,ease:Ks,"ease-in":Zs,"ease-out":Js,"ease-in-out":Qs,"step-start":Vs,"step-end":Ws},ee="_///_",ic=[Pt,Or,Ve,It,wt,Ue,Ht],de=function(){function s(o,r){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",r&&this.setOptions(r),this.value=Ot(o)?o.split(this.separator):o}return s.prototype.setOptions=function(o){for(var r in o)this[r]=o[r];return this},s.prototype.size=function(){return this.value.length},s.prototype.get=function(o){return this.value[o]},s.prototype.set=function(o,r){return this.value[o]=r,this},s.prototype.clone=function(){var o=this,r=o.separator,i=o.prefix,c=o.suffix,l=o.model,h=o.type,m=this.value.map(function(b){return he(b)?b.clone():b});return new s(m,{separator:r,prefix:i,suffix:c,model:l,type:h})},s.prototype.toValue=function(){return this.prefix+this.join()+this.suffix},s.prototype.join=function(){return this.value.map(function(o){return he(o)?o.toValue():o}).join(this.separator)},s.prototype.forEach=function(o){return this.value.forEach(o),this},s}();function oc(s){for(var o=Le(s,";"),r={},i=o.length,c=i,l=0;l<i;++l){var h=Le(o[l],":");if(h.length<2||!h[1]){--c;continue}r[h[0].trim()]=Ct(h[1].trim())}return{styles:r,length:c}}function Fo(s){var o=On;return s.length===3&&(s[3]=1),new de(s,{model:o,separator:",",type:"color",prefix:"".concat(o,"("),suffix:")"})}function ac(s){var o=mo(s),r=o.prefix,i=o.value,c=o.suffix;if(typeof i>"u")return s;if(as.indexOf(r)>-1)return Fo(bo(s));var l=Ct(i,r),h=[i],m=",",b="".concat(r,"("),E=")".concat(c);return he(l)&&(m=l.separator,h=l.value,b+=l.prefix,E=l.suffix+E),new de(h,{separator:m,model:r,prefix:b,suffix:E})}function on(s,o){return new de(s,{type:"array",separator:o})}function sc(s){var o=bo(s);return o?Fo(o):s}function Ct(s,o){if(!Ot(s))return jt(s)?on(s,","):s;var r=ce(s);return r.length>1?on(r.map(function(i){return Ct(i)}),","):(r=hs(s),r.length>1?on(r.map(function(i){return Ct(i)})," "):(r=/^(['"])([^'"]*)(['"])$/g.exec(s),r&&r[1]===r[3]?new de([Ct(r[2])],{prefix:r[1],suffix:r[1]}):s.indexOf("(")!==-1?ac(s):s.charAt(0)==="#"&&o!=="url"?sc(s):s))}function Do(s,o){o===void 0&&(o={});var r=s.model;if(r){s.setOptions({model:"",suffix:"",prefix:""});var i=s.size()>1?s:s.get(0);o[r]=i}else s.forEach(function(c){Do(c,o)});return o}function Be(s){var o=typeof s;if(o===He){if(jt(s))return _n;if(he(s))return Er}else if(o===ho||o===ss)return"value";return o}function Ao(s){return Tt(s)&&s.constructor===Object}function kn(s,o){var r=[];if(Ao(s))for(var i in s)o.push(i),r=r.concat(kn(s[i],o)),o.pop();else r.push(o.slice());return r}function ko(s,o){for(var r in o){var i=o[r];if(!Ao(i)){s[r]=!0;continue}Tt(s[r])||(s[r]={}),ko(s[r],o[r])}return s}function pe(s){return Math.round(s*Gi)/Gi}function ke(s,o,r){r===void 0&&(r=s.length);for(var i=o,c=0;c<r;++c){if(!Tt(i)||i==null)return;i=i[s[c]]}return i}function jo(s,o,r){var i=o.length,c=s;if(i===0)return!1;for(var l=0;l<i;++l)if(c===!0||(c=c[o[l]],!c||!r&&c===!0))return!1;return!0}function se(s,o){return jo(Io,s,o)}function wn(s){return jo(tc,s,!0)}function _r(s,o){s.state[An]=o}function jn(s){return s.state[An]&&s.isPaused()}function Ro(s){return!s.isEnded()&&s.state[An]}function Lo(s){for(;;){var o="".concat(Math.floor(Math.random()*1e7));if(!wr||!s)return o;var r=yr('[data-scene-id="'.concat(o,'"]'));if(!r)return o}}function zo(s){return s.getId()||s.setId(Lo(!1)).getId()}function Yi(s){return"".concat(s).match(/[0-9a-zA-Z]+/g).join("")}function No(s,o,r,i){if(i===void 0&&(i={}),!(!Ye||s.getPlayState()===$e)){var c=r||ae;if(jn(s))s.addPlayClass(!0,c,i);else{s.isEnded()&&s.setTime(0),o&&s.exportCSS({className:c});var l=s.addPlayClass(!1,c,i);if(!l)return;cc(s,l),_r(s,!0)}s.setPlayState($e)}}function cc(s,o){var r=s.state,i=s.getDuration(),c=!i||!isFinite(i),l=function(){_r(s,!1),s.finish()},h=function(){s.trigger(Mo),fr(o,"animationcancel",l),fr(o,"animationend",l),fr(o,"animationiteration",m)};s.once(Po,function(){pr(o,"animationcancel",l),pr(o,"animationend",l),pr(o,"animationiteration",m),pr(o,"animationstart",h)});var m=function(b){var E=b.elapsedTime,S=E,_=c?0:S/i;r[gr]=S,s.setIteration(_)};fr(o,"animationstart",h)}function Uo(s){var o;if(Ot(s))if(s in Hi)o=Hi[s];else{var r=Ct(s);if(Ot(r))return 0;if(r.model==="cubic-bezier")s=r.value.map(function(i){return parseFloat(i)}),o=re(s[0],s[1],s[2],s[3]);else if(r.model==="steps")o=Dn(parseFloat(r.value[0]),r.value[1]);else return 0}else jt(s)?o=re(s[0],s[1],s[2],s[3]):o=s;return o}function he(s){if(!s)return!1;var o=s.constructor.prototype;return!!(o.clone&&o.get&&o.setOptions)}function Vi(s){return s&&!!s.constructor.prototype.getItem}function Me(s){return s&&!!s.constructor.prototype.getFrame}function Rn(s){return s&&!!s.constructor.prototype.toCSSText}function $o(s,o){var r={};for(var i in s){var c=s[i];if(Rn(c))r[i]=c;else if(Tt(c)){var l=$o(c,o);for(var h in l)r["".concat(i).concat(o).concat(h)]=l[h]}}return r}function uc(s){return"length"in s&&s.length>=0}function lc(s,o,r){return function(i){var c=i.prototype;s.forEach(function(l){c[vn("get ".concat(l))]=function(){return this[r][l]}}),o.forEach(function(l){c[vn("set ".concat(l))]=function(h){return this[r][l]=h,this}})}}function Bo(s,o,r){return r===Co?!0:o!==Ae&&s===o&&o%1===0?r===(s%2>=1?En:xn):r===(s%2>=1?xn:En)}var Go=["id",It,wt,Or,Ve,Ht,Pt,Ht,ec,Gt],fc=lt(lt([],Go,!0),[Ue,fe],!1),Ir=function(s){Tr(o,s);function o(r){var i=s.call(this)||this;return i.timerId=0,i.state=Ls({id:"",easing:0,easingName:"linear",iterationCount:1,delay:0,fillMode:"forwards",direction:nc,playSpeed:1,currentTime:0,iterationTime:-1,iteration:0,tickTime:0,prevTime:0,playState:Xt,duration:0}),i.setOptions(r),i}return o.prototype.setEasing=function(r){var i=Uo(r),c=i&&i[fe]||"linear",l=this.state;return l[Ue]=i,l[fe]=c,this},o.prototype.setOptions=function(r){r===void 0&&(r={});for(var i in r){var c=r[i];if(i===Ue){this.setEasing(c);continue}else if(i===Pt){c&&this.setDuration(c);continue}ic.indexOf(i)>-1&&(this.state[i]=c)}return this},o.prototype.getTotalDuration=function(){return this.getActiveDuration(!0)},o.prototype.getActiveDuration=function(r){var i=this.state,c=i[It];return c===Ae?1/0:(r?i[wt]:0)+this.getDuration()*c},o.prototype.isEnded=function(){return this.state[$t]===0&&this.state[Gt]===Xt?!0:!(this.getTime()<this.getActiveDuration())},o.prototype.isPaused=function(){return this.state[Gt]===Xt},o.prototype.start=function(r){r===void 0&&(r=this.state[wt]);var i=this.state;return i[Gt]=$e,i[$t]>=r?(this.trigger(Mo),!0):!1},o.prototype.play=function(r){var i=this,c=this.state,l=c[wt],h=this.getTime();return c[Gt]=$e,this.isEnded()&&(h===0||h>=this.getActiveDuration())&&this.setTime(-l,!0),this.timerId=ji(function(m){c[nn]=m,i.tick(m,r)}),this.start(),this},o.prototype.pause=function(){var r=this.state;return r[Gt]!==Xt&&(r[Gt]=Xt,this.trigger(Xt)),ds(this.timerId),this},o.prototype.finish=function(){return this.setTime(0),this.state[$t]=0,this.end(),this},o.prototype.end=function(){return this.pause(),this.trigger(Po),this},o.prototype.setTime=function(r,i,c,l){var h=this.getActiveDuration(),m=this.state,b=m[$t],E=m[wt],S=i?r:this.getUnitTime(r);m[$t]=E+S,S<0?S=0:S>h&&(S=h),m[gr]=S,this.calculate();var _=i&&!c,A=m[$t],k=Ot(r)?parseFloat(r):r;return _&&b<E&&k>=0&&this.start(0),l?.(),_&&(A<b||this.isEnded())?(this.end(),this):this.isDelay()?this:(this.trigger(rc,{currentTime:S,time:this.getIterationTime(),iterationCount:m[hr]}),this)},o.prototype.getTime=function(){return this.state[gr]},o.prototype.getUnitTime=function(r){if(Ot(r)){var i=this.getDuration()||100;if(r==="from")return 0;if(r==="to")return i;var c=dn(r),l=c.unit,h=c.value;return l==="%"?(!this.getDuration()&&this.setDuration(i),pe(parseFloat(r)/100*i)):l===">"?h+Pe:h}else return pe(r)},o.prototype.isDelay=function(){var r=this.state,i=r[wt],c=r[$t];return i>0&&c<i},o.prototype.setIteration=function(r){var i=this.state,c=Math.floor(r),l=i[It]===Ae?1/0:i[It];return i[hr]<c&&c<l&&this.trigger(hr,{currentTime:i[gr],iterationCount:c}),i[hr]=r,this},o.prototype.calculate=function(){var r=this.state,i=r[It],c=r[Or],l=r[Ve],h=this.getDuration(),m=this.getTime(),b=h===0?0:m/h,E=h?m%h:0;if(!h)return this.setIterationTime(0),this;this.setIteration(b);var S=Bo(b,i,l),_=isFinite(h);if(_&&S&&(E=h-E),_&&i!==Ae){var A=c==="both"||c==="forwards";b>=i&&(E=h*(A?i%1||1:0),S&&(E=h-E))}return this.setIterationTime(E),this},o.prototype.tick=function(r,i){var c=this;if(!this.isPaused()){var l=this.state,h=l[Ht],m=l[nn],b=l[wt],E=l[$t],S=E+Math.min(1e3,r-m)/1e3*h;l[nn]=r,i&&i>=S?(this.setTime(i-b,!0),this.pause()):this.setTime(S-b,!0),l[Gt]!==Xt&&(this.timerId=ji(function(_){c.tick(_,i)}))}},o=Hs([lc(fc,Go,"state")],o),o}(Sr);function Wi(s,o){if(o===void 0&&(o=[]),!s)return"";var r=[],i=ue(s);return Fe(i,o),i.forEach(function(c){r.push("".concat(c.replace(/\d$/g,""),"(").concat(s[c],")"))}),r.join(" ")}function qo(s,o){return o===void 0&&(o=!1),Ln({},s,o)}function Ln(s,o,r){r===void 0&&(r=!1);for(var i in o){var c=o[i],l=Be(c);l===Er?s[i]=r?c.toValue():c.clone():l===je?s[i]=r?zn([i],c):c:l===_n?s[i]=c.slice():l===He?Tt(s[i])&&!he(s[i])?Ln(s[i],c,r):s[i]=qo(c,r):s[i]=o[i]}return s}function vr(s){return s[0]in br?br[s[0]]:s}function zn(s,o){var r=Be(o);if(r===Er)return o.toValue();if(r===je){if(s[0]!==qt)return zn(s,o())}else if(r===He)return qo(o,!0);return o}var Ge=function(s){Tr(o,s);function o(r){r===void 0&&(r={});var i=s.call(this)||this;return i.properties={},i.orderMap=new le(ee),i.properties={},i.set(r),i}return o.prototype.get=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var c=this.raw.apply(this,r);return zn(vr(r),c)},o.prototype.getOrders=function(r){return this.orderMap.get(r)},o.prototype.setOrders=function(r,i){var c=this.orderMap.set(r,i);return this._update(),c},o.prototype.getOrderObject=function(){return this.orderMap.getObject()},o.prototype.setOrderObject=function(r){this.orderMap.setObject(r),this._update()},o.prototype.getKeys=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var c=this.raw.apply(this,r),l=Be(c)===He?ue(c):[];return Fe(l,this.orderMap.get(r)),l},o.prototype.gets=function(){for(var r=this,i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];var l=this.get.apply(this,i),h=this.getKeys.apply(this,i);return h.map(function(m){var b=l[m];return{key:m,value:b,children:r.gets.apply(r,lt(lt([],i,!1),[m],!1))}})},o.prototype.raw=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return ke(vr(r),this.properties)},o.prototype.remove=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var c=vr(r),l=c.length;if(!l)return this;this.orderMap.remove(c);var h=ke(c,this.properties,l-1);return Tt(h)&&delete h[c[l-1]],this._update(),this},o.prototype.set=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return this._set.apply(this,r),this._update(),this},o.prototype.getNames=function(){return kn(this.properties,[])},o.prototype.has=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var c=vr(r),l=c.length;return l?!Bt(ke(c,this.properties,l)):!1},o.prototype.clone=function(){var r=new o;return r.setOrderObject(this.orderMap.orderMap),r.merge(this)},o.prototype.merge=function(r){var i=this.properties,c=r.properties;return c&&Ln(i,c),this},o.prototype.toCSSObject=function(r){var i=this.get(),c={};for(var l in i)if(!se([l],!0)){var h=i[l];l===qt&&(l=qt.replace("animation",Ye),h=(Ot(h)?h:h[fe])||"initial"),r&&(l=vn(l.replace(/^[-]+/g,""))),c[l]=h}var m=Wi(i[qi],this.orderMap.get([qi])),b=Wi(i.filter,this.orderMap.get([Zr]));return Ai&&m&&(c[Ai]=m),Zr&&b&&(c[Zr]=b),c},o.prototype.toCSSText=function(){var r=this.toCSSObject(),i=[],c=ue(r);return Fe(c,this.orderMap.get([])),c.forEach(function(l){i.push("".concat(yo(l,"-"),":").concat(r[l],";"))}),i.join("")},o.prototype.toCSS=function(){var r=this.toCSSObject(),i=[],c=ue(r);return Fe(c,this.orderMap.get([])),c.forEach(function(l){i.push("".concat(l,":").concat(r[l],";"))}),i.join("")},o.prototype.clear=function(){return this.properties={},this.orderMap.clear(),this},o.prototype._set=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var c=this,l=r.length,h=r.slice(0,-1),m=r[l-1],b=h[0];if(l===1&&Rn(m))c.merge(m);else if(b in br)c._setByPath(br[b],m);else if(l===2&&jt(b))c._setByPath(b,m);else if(he(m))se(h)?c._set.apply(c,lt(lt([],h,!1),[Do(m)],!1)):c._setByPath(h,m);else if(jt(m))c._setByPath(h,m);else if(Tt(m)){!c.has.apply(c,h)&&se(h)&&c._setByPath(h,{});for(var E in m)c._set.apply(c,lt(lt([],h,!1),[E,m[E]],!1))}else if(Ot(m)){if(se(h,!0)){if(wn(h)||!se(h))this._setByPath(h,m);else{var S=Ct(m);Tt(S)&&c._set.apply(c,lt(lt([],h,!1),[S],!1))}return this}else{var _=oc(m),A=_.styles,k=_.length;for(var I in A)c._set.apply(c,lt(lt([],h,!1),[I,A[I]],!1));if(k)return this}c._setByPath(h,m)}else c._setByPath(h,m)},o.prototype._setByPath=function(r,i){for(var c=this.properties,l=r.length,h=0;h<l-1;++h){var m=r[h];!(m in c)&&(c[m]={}),c=c[m]}if(l){var b=r[l-1];this.orderMap.add(r),l===1&&b===qt?c[b]=Uo(i):c[b]=Ot(i)&&!wn(r)?Ct(i,b):i}},o.prototype._update=function(){this.emit("update")},o}(Sr);function Nn(s,o,r,i){var c=o.length;return s.map(function(l,h){return h>=c?l:qe(l,o[h],r,i)})}function pc(s,o,r,i){var c=s.value,l=o.value,h=s.model,m=o.model;if(h!==m)return qe(s.toValue(),o.toValue(),r,i);c.length===3&&(c[3]=1),l.length===3&&(l[3]=1);for(var b=Nn(c,l,r,i),E=h,S=0;S<3;++S)b[S]=parseInt(b[S],10);var _=new de(b,{type:"color",model:E,prefix:"".concat(E,"("),suffix:")"});return _}function hc(s,o,r,i){var c=s.type;if(c==="color")return pc(s,o,r,i);var l=s.value,h=o.value,m=Nn(l,h,r,i);return new de(m,{type:c,separator:s.separator||o.separator,prefix:s.prefix||o.prefix,suffix:s.suffix||o.suffix,model:s.model||o.model})}function qe(s,o,r,i){if(i===0)return o;if(r===0||r+i===0)return s;var c=Be(s),l=Be(o),h=c===je,m=l===je;if(h||m)return function(){return qe(h?Ct(s()):s,m?Ct(o()):o,r,i)};if(c===l){if(c===Er)return hc(s,o,r,i);if(c===_n)return Nn(s,o,r,i);if(c!=="value")return s}else return s;var b=dn("".concat(s)),E=dn("".concat(o)),S;if(isNaN(b.value)||isNaN(E.value))return s;S=vo(b.value,E.value,r,i);var _=b.prefix||E.prefix,A=b.unit||E.unit;return!_&&!A?S:_+S+A}function dc(s,o,r,i,c,l){if(s===o)return i;if(s===r)return c;if(!l)return qe(i,c,s-o,r-s);var h=l((s-o)/(r-o)),m=qe(i,c,h,1-h);return m}function Xi(s,o){for(var r=s.length,i=0;i<r;++i){if(s[i]===o)return[i,i];if(s[i]>o)return[i>0?i-1:0,i]}return[r-1,r-1]}function Ki(s){var o=[];for(var r in s)o.push("".concat(Ye,"-").concat(yo(r),":").concat(s[r],";"));return o.join("")}function vc(s,o){for(var r=s.length,i=0;i<r;++i)if(o<s[i]){s.splice(i,0,o);return}s[r]=o}function Sn(s,o,r){var i=s[s.length-1];(!i||i[0]!==o||i[1]!==r)&&s.push([pe(o),pe(r)])}function gc(s,o){var r=s.map(function(c){return[c,c]}),i=[];return o.forEach(function(c){for(var l=c[It],h=c[wt],m=c[Ht],b=c[Ve],E=Math.ceil(l),S=r[r.length-1][0],_=r.length,A=S*l,k=0;k<E;++k)for(var I=b===Co||b===xn&&k%2||b===En&&!(k%2),R=0;R<_;++R){var N=r[I?_-R-1:R],B=N[1],j=S*k+(I?S-N[0]:N[0]),W=r[I?_-R:R-1];if(j>A){if(R!==0){var U=S*k+(I?S-W[0]:W[0]),X=vo(W[1],B,A-U,j-A);Sn(i,(h+S*l)/m,X)}break}else if(j===A&&i.length&&i[i.length-1][0]===A+h)break;Sn(i,(h+j)/m,B)}h&&i.unshift([0,i[0][1]]),r=i,i=[]}),r}var mc=function(s){Tr(o,s);function o(r,i){var c=s.call(this)||this;return c.times=[],c.items={},c.nameMap=new le(ee),c.elements=[],c.needUpdate=!0,c.registeredElement=!1,c.load(r,i),c}return o.prototype.getDuration=function(){var r=this.times,i=r.length;return(i===0?0:r[i-1])||this.state[Pt]},o.prototype.size=function(){return this.times.length},o.prototype.setDuration=function(r){if(!r)return this;var i=this.getDuration();if(i>0){var c=r/i,l=this,h=l.times,m=l.items,b={};this.times=h.map(function(E){var S=pe(E*c);return b[S]=m[E],S}),this.items=b}else this.newFrame(r);return this},o.prototype.setId=function(r){var i=this.state,c=this.elements,l=c.length;if(i.id=r||Lo(!!l),l&&!i[St]){var h=Yi(this.getId());i[St]="[".concat(Bi,'="').concat(h,'"]'),c.forEach(function(m){m.setAttribute(Bi,h)})}return this},o.prototype.set=function(r){for(var i=this,c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];if(Me(r))return this.set(0,r);if(jt(r))for(var h=r.length,m=0;m<h;++m){var b=h===1?0:this.getUnitTime("".concat(m/(h-1)*100,"%"));this.set(b,r[m])}else if(Tt(r)){var E=function(_){var A=r[_];ce(_).forEach(function(k){var I=i.getUnitTime(k);isNaN(I)?kn(A,[k]).forEach(function(R){for(var N,B=ke(R.slice(1),A),j=jt(B)?B:[ke(R,i.target),B],W=j.length,U=0;U<W;++U)(N=i.newFrame("".concat(U/(W-1)*100,"%"))).set.apply(N,lt(lt([],R,!1),[j[U]],!1))}):i.set(I,A)})};for(var b in r)E(b)}else if(!Bt(r)){var S=c[0];ce(r+"").forEach(function(_){var A=i.getUnitTime(_);if(Me(S)){var k=S.getDelay(),I=S.toObject(!i.hasFrame(A+k)),R=S.getDuration(),N=S.getDirection(),B=N.indexOf("reverse")>-1;for(var j in I){var W=B?R-parseFloat(j):parseFloat(j);i.set(A+W,I[j])}}else if(c.length===1&&jt(S))S.forEach(function(X){i.set(A,X)});else{var U=i.newFrame(A);U.set.apply(U,c)}})}return this.needUpdate=!0,this},o.prototype.get=function(r){for(var i=[],c=1;c<arguments.length;c++)i[c-1]=arguments[c];var l=this.getFrame(r);return l&&l.get.apply(l,i)},o.prototype.getOrders=function(r){return this.needUpdate&&this.update(),this.nameMap.get(r)},o.prototype.setOrders=function(r,i){this.needUpdate&&this.update();var c=this.nameMap.set(r,i);return this.updateFrameOrders(),c},o.prototype.getOrderObject=function(){return this.nameMap.getObject()},o.prototype.setOrderObject=function(r){this.nameMap.setObject(r),this.updateFrameOrders()},o.prototype.remove=function(r){for(var i=[],c=1;c<arguments.length;c++)i[c-1]=arguments[c];if(i.length){var l=this.getFrame(r);l&&l.remove.apply(l,i)}else this.removeFrame(r);return this.needUpdate=!0,this},o.prototype.append=function(r){return Me(r)?this.set(this.getDuration(),r):this.append(new o(r)),this},o.prototype.prepend=function(r){if(Me(r)){var i=r.getDuration()+r.getDelay(),c=this.getFrame(0);this.removeFrame(0),this.unshift(i),this.set(0,r),this.set(i+Pe,c)}else this.prepend(new o(r));return this},o.prototype.unshift=function(r){var i=this,c=i.times,l=i.items,h={};return this.times=c.map(function(m){var b=pe(r+m);return h[b]=l[m],b}),this.items=h,this},o.prototype.toObject=function(r){r===void 0&&(r=!0);var i={},c=this.getDelay();return this.forEach(function(l,h){i[(!h&&!r?Pe:0)+c+h]=l.clone()}),i},o.prototype.setSelector=function(r){return this.setElement(r),this},o.prototype.getElements=function(){return this.elements},o.prototype.setElements=function(r){return this.setElement(r)},o.prototype.setElement=function(r){r!==!0&&this.registeredElement!==r&&(this.registeredElement=r);var i=this.state,c=this.registeredElement,l=r,h=[];if(Mt(c)&&(l=c(this.getId(),0)),l){if(l===!0||Ot(l)){var m=Ot(i[St])&&i[St]||"".concat(i.id),b=l===!0?m:l,E=/([\s\S]+)(:+[a-zA-Z]+)$/g.exec(b);try{h=Jr(yr(E?E[1]:b,!0))}catch{h=[]}i[St]=b}else if(uc(l))h=Jr(l);else if(l instanceof Element)h=[l];else if("current"in l||"value"in l){var S=l.current||l.value;S?h=[S]:h=[]}}else return this;return h.length?(this.elements=h,this.setId(this.getId()),this.target=h[0].style,this.targetFunc=function(_){var A=_.get("attribute");if(A){var k=function(B){h.forEach(function(j){j.setAttribute(B,A[B])})};for(var I in A)k(I)}if(_.has("html")){var R=_.get("html");h.forEach(function(B){B.innerHTML=R})}var N=_.toCSSText();if(i.cssText!==N)return i.cssText=N,h.forEach(function(B){B.style.cssText+=N}),_},this):this},o.prototype.setTarget=function(r){return this.target=r,this.targetFunc=function(i){var c=i.get();for(var l in c)r[l]=c[l]},this},o.prototype.setCSS=function(r,i){return i===void 0&&(i=[]),this.set(r,xs(this.elements,i)),this},o.prototype.setTime=function(r,i,c,l){var h=this;return s.prototype.setTime.call(this,r,i,c,function(){var m=h.getIterationTime(),b=h.getEasing()||l,E=h.getNowFrame(m,b),S=h.getTime();h.temp=E,h.trigger("animate",{frame:E,currentTime:S,time:m}),h.targetFunc&&h.targetFunc(E)}),this},o.prototype.update=function(){var r=this.nameMap,i={};this.forEach(function(h){ko(i,h.properties)});var c=new le(ee);function l(h,m){var b=ue(h);Fe(b,r.get(m)),c.set(m,b),b.forEach(function(E){var S=h[E];Tt(S)&&l(S,lt(lt([],m,!0),[E],!1))})}return l(i,[]),this.nameMap=c,this.forEach(function(h){h.setOrderObject(c.orderMap)}),this.needUpdate=!1,this},o.prototype.newFrame=function(r){var i=this.getFrame(r);return i||(i=new Ge,this.setFrame(r,i),i)},o.prototype.setFrame=function(r,i){var c=this.getUnitTime(r);return this.items[c]=i,vc(this.times,c),this.needUpdate=!0,this},o.prototype.getFrame=function(r){return this.items[this.getUnitTime(r)]},o.prototype.removeFrame=function(r){var i=this.getUnitTime(r),c=this.items,l=this.times.indexOf(i);return delete c[i],l>-1&&this.times.splice(l,1),this.needUpdate=!0,this},o.prototype.hasFrame=function(r){return this.getUnitTime(r)in this.items},o.prototype.hasName=function(r){return this.needUpdate&&this.update(),!!this.nameMap.hasName(r)},o.prototype.mergeFrame=function(r,i){if(i){var c=this.newFrame(r);c.merge(i)}return this},o.prototype.getNowFrame=function(r,i,c){var l=this;this.needUpdate&&this.update();var h=new Ge,m=Xi(this.times,r),b=m[0],E=m[1],S=this.getEasing()||i,_=this.nameMap;if(this.hasName([qt])){var A=this.getNowValue(r,[qt],b,E,!1,0,!0);Mt(A)&&(S=A)}if(c){var k=this.getFrame(r),I=k.orderMap.filter([],function(j){return k.has.apply(k,j)});for(var R in Io){var N=_.get([R]);I.get([R])&&N&&I.set([R],N)}_=I}var B=_.gets([]);return h.setOrderObject(_.orderMap),B.forEach(function(j){var W=l.getNowValue(r,j,b,E,c,S,wn(j));Bt(W)||h.set(j,W)}),h},o.prototype.getCurrentFrame=function(r,i){var c=this.getIterationTime(),l=r||this.needUpdate||!this.temp?this.getComputedFrame(c,i):this.temp;return this.temp=l,l},o.prototype.getComputedFrame=function(r,i,c){return this.getNowFrame(r,i,c)},o.prototype.load=function(r,i){var c;if(r===void 0&&(r={}),i===void 0&&(i=r.options),i&&this.setOptions(i),jt(r))this.set(r);else if(r.keyframes)this.set(r.keyframes);else for(var l in r)l!=="options"&&this.set((c={},c[l]=r[l],c));return i&&i[Pt]&&this.setDuration(i[Pt]),this},o.prototype.clone=function(){var r=new o;return r.setOptions(this.state),r.setOrderObject(this.nameMap.orderMap),this.forEach(function(i,c){r.setFrame(c,i.clone())}),r},o.prototype.forEach=function(r){var i=this.times,c=this.items;return i.forEach(function(l){r(c[l],l,c)}),this},o.prototype.setOptions=function(r){r===void 0&&(r={}),s.prototype.setOptions.call(this,r);var i=r.id,c=r.selector,l=r.elements,h=r.element,m=r.target;return i&&this.setId(i),m?this.setTarget(m):c&&!this.state.noRegisterElement?this.setSelector(c):(l||h)&&this.setElement(l||h),this},o.prototype.toCSS=function(r,i,c){r===void 0&&(r={className:ae}),i===void 0&&(i=this.getDuration()),c===void 0&&(c=[]);var l=this.state,h=l[St];if(!h)return"";var m=this.getDuration();l[Pt]=m,c.push(l);var b=Jr(c).reverse(),E=Yi(zo(this)),S=c[0],_=Mn(b,function(K){return K[It]===Ae||!isFinite(K[Pt])},c.length-1),A=b.slice(0,_),k=i||A.reduce(function(K,Y){return(Y[wt]+K*Y[It])/Y[Ht]},m),I=b.slice(_).reduce(function(K,Y){return(K+Y[wt])/Y[Ht]},0),R=mr(b,function(K){return K[Ue]&&K[fe]},l)[fe],N=b[_][It],B=S[Or],j=b[_][Ve],W=Ki({fillMode:B,direction:j,iterationCount:N,delay:"".concat(I,"s"),name:"".concat($i,"KEYFRAMES_").concat(E),duration:"".concat(k/S[Ht],"s"),timingFunction:R}),U=ce(h).map(function(K){var Y=/([\s\S]+)(:+[a-zA-Z]+)$/g.exec(K);return Y?[Y[1],Y[2]]:[K,""]}),X=r.className,ct=r.selector,w=Mt(ct)?ct(this,h):ct;return`
    `.concat(w||U.map(function(K){var Y=K[0],at=K[1];return"".concat(Y,".").concat(X).concat(at)})," {").concat(W,`}
    `).concat(U.map(function(K){var Y=K[0],at=K[1];return"".concat(Y,".").concat(dr).concat(at)})," {").concat(Ye,`-play-state: paused;}
    @`).concat(cs," ").concat($i,"KEYFRAMES_").concat(E,"{").concat(this._toKeyframes(k,A,j),"}")},o.prototype.exportCSS=function(r,i,c){if(!this.elements.length)return"";var l=this.toCSS(r,i,c),h=c&&!Bt(c[It]);return h||(this.styledInjector&&(this.styledInjector.destroy(),this.styledInjector=null),this.styled=Oo(l),this.styledInjector=this.styled.inject(this.getAnimationElement(),{original:!0})),this},o.prototype.pause=function(){return s.prototype.pause.call(this),jn(this)&&this.pauseCSS(),this},o.prototype.pauseCSS=function(){return this.elements.forEach(function(r){Li(r,dr)}),this},o.prototype.endCSS=function(){return this.elements.forEach(function(r){lr(r,dr),lr(r,ae)}),_r(this,!1),this},o.prototype.end=function(){return Ro(this)&&this.endCSS(),s.prototype.end.call(this),this},o.prototype.playCSS=function(r,i,c){return r===void 0&&(r=!0),c===void 0&&(c={}),No(this,r,i,c),this},o.prototype.getAnimationElement=function(){return this.elements[0]},o.prototype.addPlayClass=function(r,i,c){c===void 0&&(c={});var l=this.elements,h=l.length,m=Ki(c);if(h)return r?l.forEach(function(b){lr(b,dr)}):(l.forEach(function(b){b.style.cssText+=m,bs(b,ae)&&lr(b,ae)}),l.forEach(function(b){b.clientWidth}),l.forEach(function(b){Li(b,ae)})),l[0]},o.prototype.clear=function(){return this.times=[],this.items={},this.nameMap=new le(ee),this.styledInjector&&this.styledInjector.destroy(),this.styled=null,this.styledInjector=null,this.temp=null,this.needUpdate=!0,this},o.prototype.getNowValue=function(r,i,c,l,h,m,b){var E=this.times,S=E.length,_,A,k,I,R=Bt(c),N=Bt(l);if(R||N){var B=Xi(E,r);R&&(c=B[0]),N&&(l=B[1])}for(var j=c;j>=0;--j){var W=this.getFrame(E[j]);if(W.has.apply(W,i)){_=E[j],k=W;break}}var U=k&&k.raw.apply(k,i);if(h&&!se([i[0]]))return _===r?U:void 0;if(b)return U;for(var j=l;j<S;++j){var W=this.getFrame(E[j]);if(W.has.apply(W,i)){A=E[j],I=W;break}}var X=I&&I.raw.apply(I,i);return!k||Bt(U)?X:!I||Bt(X)||U===X?U:dc(r,Math.max(_,0),A,U,X,m)},o.prototype._toKeyframes=function(r,i,c){var l=this,h={},m=this.times.slice();if(!m.length)return"";var b=this.getDuration();!this.getFrame(0)&&m.unshift(0),!this.getFrame(b)&&m.push(b);var E=gc(m,i),S=E[E.length-1];S[0]<r&&Sn(E,r,S[1]);var _=-1;return E.map(function(A){var k=A[0],I=A[1];h[I]||(h[I]=(!l.hasFrame(I)||I===0||I===b?l.getNowFrame(I):l.getNowFrame(I,0,!0)).toCSSText());var R=k/r*100;return R-_<Pe&&(R+=Pe),_=R,"".concat(Math.min(R,100),`%{
                `).concat(k===0&&!Bo(0,1,c)?"":h[I],`
            }`)}).join("")},o.prototype.updateFrameOrders=function(){var r=this.nameMap.orderMap;this.forEach(function(i){i.setOrderObject(r)})},o}(Ir),Un=function(s){Tr(o,s);function o(r,i){var c=s.call(this)||this;return c.items={},c.orderMap=new le(ee),c.load(r,i),c}return o.prototype.getDuration=function(){var r=0;return this.forEach(function(i){r=Math.max(r,i.getTotalDuration()/i.getPlaySpeed())}),r||this.state[Pt]},o.prototype.setDuration=function(r){this.items;var i=this.getDuration();if(r===0||!isFinite(i))return this;if(i===0)this.forEach(function(l){l.setDuration(r)});else{var c=r/i;this.forEach(function(l){l.setDelay(l.getDelay()*c),l.setDuration(l.getDuration()*c)})}return s.prototype.setDuration.call(this,r),this},o.prototype.getItem=function(r){return this.items[r]},o.prototype.newItem=function(r,i){if(i===void 0&&(i={}),this.items[r])return this.items[r];var c=new mc;return this.setItem(r,c),c.setOptions(i),c},o.prototype.removeItem=function(r){return delete this.items[r],this.orderMap.remove([r]),this},o.prototype.setItem=function(r,i){return i.setId(r),this.items[r]=i,this.orderMap.add([r]),this},o.prototype.getCurrentFrames=function(r,i){var c=this.getEasing()||i,l={};return this.forEach(function(h){var m=h.getId();Vi(h)?l[m]=h.getCurrentFrames(r,c):l[m]=h.getCurrentFrame(r,c)}),this.temp=l,l},o.prototype.getCurrentFlattedFrames=function(r,i){var c=this.getCurrentFrames(r,i);return $o(c,ee)},o.prototype.setTime=function(r,i,c,l){var h=this;return s.prototype.setTime.call(this,r,i,c,function(){var m=h.getIterationTime(),b=h.getEasing()||l;h.forEach(function(S){S.setTime(m*S.getPlaySpeed()-S.getDelay(),i,!0,b)});var E=h.getCurrentFrames(!1,l);h.trigger("animate",{frames:E,currentTime:h.getTime(),time:m})}),this},o.prototype.forEach=function(r){var i=this.items;return this.getOrders().forEach(function(c,l){r(i[c],c,l,i)}),this},o.prototype.toCSS=function(r,i,c){i===void 0&&(i=this.getDuration()),c===void 0&&(c=[]);var l=!i||!isFinite(i)?0:i,h=[],m=this.state;return m[Pt]=this.getDuration(),this.forEach(function(b){h.push(b.toCSS(r,l,c.concat(m)))}),h.join("")},o.prototype.exportCSS=function(r,i,c){var l=this.toCSS(r,i,c);return(!c||!c.length)&&(this.styledInjector&&(this.styledInjector.destroy(),this.styledInjector=null),this.styled=Oo(l),this.styledInjector=this.styled.inject(this.getAnimationElement(),{original:!0})),this},o.prototype.append=function(r){r.setDelay(r.getDelay()+this.getDuration()),this.setItem(zo(r),r)},o.prototype.pauseCSS=function(){return this.forEach(function(r){r.pauseCSS()})},o.prototype.pause=function(){return s.prototype.pause.call(this),jn(this)&&this.pauseCSS(),this.forEach(function(r){r.pause()}),this},o.prototype.endCSS=function(){this.forEach(function(r){r.endCSS()}),_r(this,!1)},o.prototype.end=function(){return Ro(this)&&this.endCSS(),s.prototype.end.call(this),this},o.prototype.getOrders=function(){return this.orderMap.get([])||[]},o.prototype.setOrders=function(r){return this.orderMap.set([],r)},o.prototype.getAnimationElement=function(){var r;return this.forEach(function(i){var c=i.getAnimationElement();!r&&(r=c)}),r},o.prototype.addPlayClass=function(r,i,c){c===void 0&&(c={});var l;return this.forEach(function(h){var m=h.addPlayClass(r,i,c);!l&&(l=m)}),l},o.prototype.playCSS=function(r,i,c){return r===void 0&&(r=!0),c===void 0&&(c={}),No(this,r,i,c),this},o.prototype.set=function(r){return this.load(r),this},o.prototype.clear=function(){this.finish(),this.items={},this.orderMap=new le(ee),this.styledInjector&&this.styledInjector.destroy(),this.styled=null,this.styledInjector=null},o.prototype.load=function(r,i){if(r===void 0&&(r={}),i===void 0&&(i=r.options),!r)return this;this.setOptions(i);var c=i&&i[St]||this.state[St],l=function(b){if(b==="options")return"continue";var E=r[b],S=void 0;if(Vi(E)||Me(E))h.setItem(b,E),S=E;else if(Mt(E)){var _=[];c&&wr&&(h.state.noRegisterElement||(_=yr("".concat(Mt(c)?c(b):b),!0)));for(var A=_.length,k=A||E.defaultCount||0,I=new o,R=[],N=0;N<k;++N){var B=_[N],j=I.newItem(N);j.setId().load(E(N,_[N])),R.push(j.getId()),B&&j.setElement(B)}if(!A){var W=[];I.state[St]=function(U){return W.length||(W=yr("".concat(Mt(c)?c(b):b),!0)),W[R.indexOf(U)]}}return h.setItem(b,I),"continue"}else S=h.newItem(b,{noRegisterElement:!0}),S.load(E);h.state.noRegisterElement||c&&S.setSelector(c)},h=this;for(var m in r)l(m)},o.prototype.setOptions=function(r){r===void 0&&(r={}),s.prototype.setOptions.call(this,r);var i=r.selector;return i&&(this.state[St]=i),this},o.prototype.setSelector=function(r){var i=this.state,c=r===!0?i[St]||!0:r;i[St]=c;var l=Mt(r);return c&&this.forEach(function(h,m){h.setSelector(l?r(m):c)}),this},o.prototype.start=function(r){r===void 0&&(r=this.state[wt]);var i=s.prototype.start.call(this,r);return i?this.forEach(function(c){c.start(0)}):this.forEach(function(c){c.setPlayState($e)}),i},o.VERSION="1.10.3",o}(Ir);function We(s){var o=s.prototype;return ue(o).filter(function(r){var i=Object.getOwnPropertyDescriptor(o,r);return r==="constructor"?!1:!i.get&&!i.set&&Mt(i.value||o[r])})}var yc=We(Sr),$n=lt(lt([],yc,!0),We(Ir),!0);lt(lt([],$n,!0),We(Un),!0);lt(lt([],$n,!0),We(Un),!0);var Zi=lt(lt([],$n,!0),We(Ge),!0),Ji={methods:Zi,created:function(s){var o=Mt(s)?s():s,r=ze(0),i;To(o)?i=o:i=ze(Rn(o)?o:new Ge(o));var c=rn(function(){return i.current,r.current,i.current.toCSSText()}),l=rn(function(){return i.current,c.current,i.current.toCSSObject()}),h=rn(function(){return i.current,c.current,i.current.toCSSObject(!0)}),m=function(){++r.current};i.subscribe(function(E,S){S.off("update",m),E.on("update",m)});var b=zs(Ne({cssText:c,cssObject:l,camelCasedCSSObject:h,onUpdate:m},Zi.reduce(function(E,S){return E[S]=function(){for(var _,A=[],k=0;k<arguments.length;k++)A[k]=arguments[k];var I=i.current;return I==null?void 0:(_=I[S]).call.apply(_,lt([I],A,!1))},E},{})));return b},destroy:function(s){s.off("update",s.onUpdate)}};Ne(Ne({},Ji),{created:function(s){var o=Mt(s)?s():s,r=ze(new Ge);return o.on("animate",function(i){r.current=i.frame}),Ji.created(r)}});function bc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function xc(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var o=s.default;if(typeof o=="function"){var r=function i(){var c=!1;try{c=this instanceof i}catch{}return c?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};r.prototype=o.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(s).forEach(function(i){var c=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(r,i,c.get?c:{enumerable:!0,get:function(){return s[i]}})}),r}var an={exports:{}},Qi;function Ec(){return Qi||(Qi=1,function(s){var o=function(r){var i=Object.prototype,c=i.hasOwnProperty,l=Object.defineProperty||function(C,P,O){C[P]=O.value},h,m=typeof Symbol=="function"?Symbol:{},b=m.iterator||"@@iterator",E=m.asyncIterator||"@@asyncIterator",S=m.toStringTag||"@@toStringTag";function _(C,P,O){return Object.defineProperty(C,P,{value:O,enumerable:!0,configurable:!0,writable:!0}),C[P]}try{_({},"")}catch{_=function(P,O,G){return P[O]=G}}function A(C,P,O,G){var L=P&&P.prototype instanceof W?P:W,J=Object.create(L.prototype),ut=new st(G||[]);return l(J,"_invoke",{value:q(C,O,ut)}),J}r.wrap=A;function k(C,P,O){try{return{type:"normal",arg:C.call(P,O)}}catch(G){return{type:"throw",arg:G}}}var I="suspendedStart",R="suspendedYield",N="executing",B="completed",j={};function W(){}function U(){}function X(){}var ct={};_(ct,b,function(){return this});var w=Object.getPrototypeOf,K=w&&w(w(ht([])));K&&K!==i&&c.call(K,b)&&(ct=K);var Y=X.prototype=W.prototype=Object.create(ct);U.prototype=X,l(Y,"constructor",{value:X,configurable:!0}),l(X,"constructor",{value:U,configurable:!0}),U.displayName=_(X,S,"GeneratorFunction");function at(C){["next","throw","return"].forEach(function(P){_(C,P,function(O){return this._invoke(P,O)})})}r.isGeneratorFunction=function(C){var P=typeof C=="function"&&C.constructor;return P?P===U||(P.displayName||P.name)==="GeneratorFunction":!1},r.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,X):(C.__proto__=X,_(C,S,"GeneratorFunction")),C.prototype=Object.create(Y),C},r.awrap=function(C){return{__await:C}};function pt(C,P){function O(J,ut,dt,gt){var vt=k(C[J],C,ut);if(vt.type==="throw")gt(vt.arg);else{var H=vt.arg,Rt=H.value;return Rt&&typeof Rt=="object"&&c.call(Rt,"__await")?P.resolve(Rt.__await).then(function(xt){O("next",xt,dt,gt)},function(xt){O("throw",xt,dt,gt)}):P.resolve(Rt).then(function(xt){H.value=xt,dt(H)},function(xt){return O("throw",xt,dt,gt)})}}var G;function L(J,ut){function dt(){return new P(function(gt,vt){O(J,ut,gt,vt)})}return G=G?G.then(dt,dt):dt()}l(this,"_invoke",{value:L})}at(pt.prototype),_(pt.prototype,E,function(){return this}),r.AsyncIterator=pt,r.async=function(C,P,O,G,L){L===void 0&&(L=Promise);var J=new pt(A(C,P,O,G),L);return r.isGeneratorFunction(P)?J:J.next().then(function(ut){return ut.done?ut.value:J.next()})};function q(C,P,O){var G=I;return function(J,ut){if(G===N)throw new Error("Generator is already running");if(G===B){if(J==="throw")throw ut;return bt()}for(O.method=J,O.arg=ut;;){var dt=O.delegate;if(dt){var gt=Z(dt,O);if(gt){if(gt===j)continue;return gt}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(G===I)throw G=B,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);G=N;var vt=k(C,P,O);if(vt.type==="normal"){if(G=O.done?B:R,vt.arg===j)continue;return{value:vt.arg,done:O.done}}else vt.type==="throw"&&(G=B,O.method="throw",O.arg=vt.arg)}}}function Z(C,P){var O=P.method,G=C.iterator[O];if(G===h)return P.delegate=null,O==="throw"&&C.iterator.return&&(P.method="return",P.arg=h,Z(C,P),P.method==="throw")||O!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+O+"' method")),j;var L=k(G,C.iterator,P.arg);if(L.type==="throw")return P.method="throw",P.arg=L.arg,P.delegate=null,j;var J=L.arg;if(!J)return P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,j;if(J.done)P[C.resultName]=J.value,P.next=C.nextLoc,P.method!=="return"&&(P.method="next",P.arg=h);else return J;return P.delegate=null,j}at(Y),_(Y,S,"Generator"),_(Y,b,function(){return this}),_(Y,"toString",function(){return"[object Generator]"});function et(C){var P={tryLoc:C[0]};1 in C&&(P.catchLoc=C[1]),2 in C&&(P.finallyLoc=C[2],P.afterLoc=C[3]),this.tryEntries.push(P)}function rt(C){var P=C.completion||{};P.type="normal",delete P.arg,C.completion=P}function st(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(et,this),this.reset(!0)}r.keys=function(C){var P=Object(C),O=[];for(var G in P)O.push(G);return O.reverse(),function L(){for(;O.length;){var J=O.pop();if(J in P)return L.value=J,L.done=!1,L}return L.done=!0,L}};function ht(C){if(C){var P=C[b];if(P)return P.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var O=-1,G=function L(){for(;++O<C.length;)if(c.call(C,O))return L.value=C[O],L.done=!1,L;return L.value=h,L.done=!0,L};return G.next=G}}return{next:bt}}r.values=ht;function bt(){return{value:h,done:!0}}return st.prototype={constructor:st,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(rt),!C)for(var P in this)P.charAt(0)==="t"&&c.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=h)},stop:function(){this.done=!0;var C=this.tryEntries[0],P=C.completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var P=this;function O(gt,vt){return J.type="throw",J.arg=C,P.next=gt,vt&&(P.method="next",P.arg=h),!!vt}for(var G=this.tryEntries.length-1;G>=0;--G){var L=this.tryEntries[G],J=L.completion;if(L.tryLoc==="root")return O("end");if(L.tryLoc<=this.prev){var ut=c.call(L,"catchLoc"),dt=c.call(L,"finallyLoc");if(ut&&dt){if(this.prev<L.catchLoc)return O(L.catchLoc,!0);if(this.prev<L.finallyLoc)return O(L.finallyLoc)}else if(ut){if(this.prev<L.catchLoc)return O(L.catchLoc,!0)}else if(dt){if(this.prev<L.finallyLoc)return O(L.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(C,P){for(var O=this.tryEntries.length-1;O>=0;--O){var G=this.tryEntries[O];if(G.tryLoc<=this.prev&&c.call(G,"finallyLoc")&&this.prev<G.finallyLoc){var L=G;break}}L&&(C==="break"||C==="continue")&&L.tryLoc<=P&&P<=L.finallyLoc&&(L=null);var J=L?L.completion:{};return J.type=C,J.arg=P,L?(this.method="next",this.next=L.finallyLoc,j):this.complete(J)},complete:function(C,P){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&P&&(this.next=P),j},finish:function(C){for(var P=this.tryEntries.length-1;P>=0;--P){var O=this.tryEntries[P];if(O.finallyLoc===C)return this.complete(O.completion,O.afterLoc),rt(O),j}},catch:function(C){for(var P=this.tryEntries.length-1;P>=0;--P){var O=this.tryEntries[P];if(O.tryLoc===C){var G=O.completion;if(G.type==="throw"){var L=G.arg;rt(O)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(C,P,O){return this.delegate={iterator:ht(C),resultName:P,nextLoc:O},this.method==="next"&&(this.arg=h),j}},r}(s.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}(an)),an.exports}var sn,to;function wc(){return to||(to=1,sn={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}),sn}var cn,eo;function Sc(){return eo||(eo=1,cn=(s,o)=>{const r=s._malloc(o.length*Uint32Array.BYTES_PER_ELEMENT);return o.forEach((i,c)=>{const l=s.lengthBytesUTF8(i)+1,h=s._malloc(l);s.stringToUTF8(i,h,l),s.setValue(r+Uint32Array.BYTES_PER_ELEMENT*c,h,"i32")}),[o.length,r]}),cn}const Tc="0.11.6",Oc={"@ffmpeg/core":"^0.11.0"},Ho={version:Tc,devDependencies:Oc},_c=`https://unpkg.com/@ffmpeg/core@${Ho.devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`,Ic={corePath:_c};var un,ro;function Pc(){if(ro)return un;ro=1;let s=!1,o=()=>{};return un={logging:s,setLogging:l=>{s=l},setCustomLogger:l=>{o=l},log:(l,h)=>{o({type:l,message:h}),s&&console.log(`[${l}] ${h}`)}},un}var Qt=Pc(),ln,no;function Mc(){return no||(no=1,ln={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:o=>`
createFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${o}. Use another URL when calling createFFmpeg():

const ffmpeg = createFFmpeg({
  corePath: 'http://localhost:3000/ffmpeg-core.js',
});
`}),ln}var io=Mc();const oe=async(s,o)=>{Qt.log("info",`fetch ${s}`);const r=await(await fetch(s)).arrayBuffer();Qt.log("info",`${s} file size = ${r.byteLength} bytes`);const i=new Blob([r],{type:o}),c=URL.createObjectURL(i);return Qt.log("info",`${s} blob URL = ${c}`),c},Cc=async({corePath:s,workerPath:o,wasmPath:r})=>{if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){if(typeof s!="string")throw Error("corePath should be a string!");const m=new URL(s,import.meta.url).href,b=await oe(m,"application/javascript"),E=await oe(r!==void 0?r:m.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),S=await oe(o!==void 0?o:m.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(_=>{if(globalThis.importScripts(b),typeof createFFmpegCore>"u")throw Error(io.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(m));Qt.log("info","ffmpeg-core.js script loaded"),_({createFFmpegCore,corePath:b,wasmPath:E,workerPath:S})}):(Qt.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:b,wasmPath:E,workerPath:S}))}if(typeof s!="string")throw Error("corePath should be a string!");const i=new URL(s,import.meta.url).href,c=await oe(i,"application/javascript"),l=await oe(r!==void 0?r:i.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),h=await oe(o!==void 0?o:i.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(m=>{const b=document.createElement("script"),E=()=>{if(b.removeEventListener("load",E),typeof createFFmpegCore>"u")throw Error(io.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(i));Qt.log("info","ffmpeg-core.js script loaded"),m({createFFmpegCore,corePath:c,wasmPath:l,workerPath:h})};b.src=c,b.type="text/javascript",b.addEventListener("load",E),document.getElementsByTagName("head")[0].appendChild(b)}):(Qt.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:c,wasmPath:l,workerPath:h}))},Fc=s=>new Promise((o,r)=>{const i=new FileReader;i.onload=()=>{o(i.result)},i.onerror=({target:{error:{code:c}}})=>{r(Error(`File could not be read! Code=${c}`))},i.readAsArrayBuffer(s)}),Dc=async s=>{let o=s;return typeof s>"u"?new Uint8Array:(typeof s=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(s)?o=atob(s.split(",")[1]).split("").map(r=>r.charCodeAt(0)):o=await(await fetch(new URL(s,import.meta.url).href)).arrayBuffer():(s instanceof File||s instanceof Blob)&&(o=await Fc(s)),new Uint8Array(o))},Ac=Object.freeze(Object.defineProperty({__proto__:null,defaultOptions:Ic,fetchFile:Dc,getCreateFFmpegCore:Cc},Symbol.toStringTag,{value:"Module"})),Yo=xc(Ac);var fn,oo;function kc(){if(oo)return fn;oo=1;const{defaultArgs:s,baseOptions:o}=wc(),r=Sc(),{defaultOptions:i,getCreateFFmpegCore:c}=Yo,{version:l}=Ho,h=Error("ffmpeg.wasm is not ready, make sure you have completed load().");return fn=(m={})=>{const{log:b,logger:E,progress:S,..._}={...o,...i,...m};let A=null,k=null,I=null,R=null,N=!1,B=()=>{},j=b,W=S,U=0,X=0,ct=!1,w=0;const K=O=>{O==="FFMPEG_END"&&I!==null&&(I(),I=null,R=null,N=!1)},Y=(O,G)=>{B({type:O,message:G}),j&&console.log(`[${O}] ${G}`)},at=O=>{const[G,L,J]=O.split(":");return parseFloat(G)*60*60+parseFloat(L)*60+parseFloat(J)},pt=(O,G)=>{if(typeof O=="string")if(O.startsWith("  Duration")){const L=O.split(", ")[0].split(": ")[1],J=at(L);G({duration:J,ratio:w}),(U===0||U>J)&&(U=J,ct=!0)}else if(ct&&O.startsWith("    Stream")){const L=O.match(/([\d.]+) fps/);if(L){const J=parseFloat(L[1]);X=U*J}else X=0;ct=!1}else if(O.startsWith("frame")||O.startsWith("size")){const L=O.split("time=")[1].split(" ")[0],J=at(L),ut=O.match(/frame=\s*(\d+)/);if(X&&ut){const dt=parseFloat(ut[1]);w=Math.min(dt/X,1)}else w=J/U;G({ratio:w,time:J})}else O.startsWith("video:")&&(G({ratio:1}),U=0)},q=({type:O,message:G})=>{Y(O,G),pt(G,W),K(G)},Z=async()=>{if(Y("info","load ffmpeg-core"),A===null){Y("info","loading ffmpeg-core");const{createFFmpegCore:O,corePath:G,workerPath:L,wasmPath:J}=await c(_);A=await O({mainScriptUrlOrBlob:G,printErr:ut=>q({type:"fferr",message:ut}),print:ut=>q({type:"ffout",message:ut}),locateFile:(ut,dt)=>{if(typeof window<"u"||typeof WorkerGlobalScope<"u"){if(typeof J<"u"&&ut.endsWith("ffmpeg-core.wasm"))return J;if(typeof L<"u"&&ut.endsWith("ffmpeg-core.worker.js"))return L}return dt+ut}}),k=A.cwrap(_.mainName||"proxy_main","number",["number","number"]),Y("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")},et=()=>A!==null,rt=(...O)=>{if(Y("info",`run ffmpeg command: ${O.join(" ")}`),A===null)throw h;if(N)throw Error("ffmpeg.wasm can only run one command at a time");return N=!0,new Promise((G,L)=>{const J=[...s,...O].filter(ut=>ut.length!==0);I=G,R=L,k(...r(A,J))})},st=(O,...G)=>{if(Y("info",`run FS.${O} ${G.map(L=>typeof L=="string"?L:`<${L.length} bytes binary file>`).join(" ")}`),A===null)throw h;{let L=null;try{L=A.FS[O](...G)}catch{throw Error(O==="readdir"?`ffmpeg.FS('readdir', '${G[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:O==="readFile"?`ffmpeg.FS('readFile', '${G[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return L}},ht=()=>{if(A===null)throw h;R&&R("ffmpeg has exited"),N=!1;try{A.exit(1)}catch(O){Y(O.message),R&&R(O)}finally{A=null,k=null,I=null,R=null}},bt=O=>{W=O},C=O=>{B=O},P=O=>{j=O};return Y("info",`use ffmpeg.wasm v${l}`),{setProgress:bt,setLogger:C,setLogging:P,load:Z,isLoaded:et,run:rt,exit:ht,FS:st}},fn}var pn,ao;function jc(){if(ao)return pn;ao=1,Ec();const s=kc(),{fetchFile:o}=Yo;return pn={createFFmpeg:s,fetchFile:o},pn}var so=jc(),Tn=function(s,o){return Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(r[c]=i[c])},Tn(s,o)};function Rc(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");Tn(s,o);function r(){this.constructor=s}s.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}var xr=function(){return xr=Object.assign||function(o){for(var r,i=1,c=arguments.length;i<c;i++){r=arguments[i];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(o[l]=r[l])}return o},xr.apply(this,arguments)};function Kt(s,o,r,i){function c(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(S){try{E(i.next(S))}catch(_){h(_)}}function b(S){try{E(i.throw(S))}catch(_){h(_)}}function E(S){S.done?l(S.value):c(S.value).then(m,b)}E((i=i.apply(s,[])).next())})}function Zt(s,o){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,c,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(E){return function(S){return b([E,S])}}function b(E){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,E[0]&&(r=0)),r;)try{if(i=1,c&&(l=E[0]&2?c.return:E[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,E[1])).done)return l;switch(c=0,l&&(E=[E[0]&2,l.value]),E[0]){case 0:case 1:l=E;break;case 4:return r.label++,{value:E[1],done:!1};case 5:r.label++,c=E[1],E=[0];continue;case 7:E=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(E[0]===6||E[0]===2)){r=0;continue}if(E[0]===3&&(!l||E[1]>l[0]&&E[1]<l[3])){r.label=E[1];break}if(E[0]===6&&r.label<l[1]){r.label=l[1],l=E;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(E);break}l[2]&&r.ops.pop(),r.trys.pop();continue}E=o.call(s,r)}catch(S){E=[6,S],c=0}finally{i=l=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}function Jt(s,o,r){if(arguments.length===2)for(var i=0,c=o.length,l;i<c;i++)(l||!(i in o))&&(l||(l=Array.prototype.slice.call(o,0,i)),l[i]=o[i]);return s.concat(l||Array.prototype.slice.call(o))}function Lc(s){try{var o=new URL(s).protocol;if(o)return!0}catch{}return!1}function zc(s,o){var r=s.split("/").slice(0,-1).concat(o.split("/"));r=r.filter(function(c,l){return l===0||c!=="."});for(var i=-1;(i=r.indexOf(".."))>0;)r.splice(i-1,2);return r.join("/")}function hn(){var s=Date.now();return{startTime:s,getCurrentInfo:function(o){var r=(Date.now()-s)/1e3;return{currentTime:r,expectedTime:r/o}}}}function Nc(s){return s&&"getDuration"in s}var co={mp4:"libx264",webm:"libvpx-vp9"},Uc=function(s){Rc(o,s);function o(r){r===void 0&&(r={});var i=s.call(this)||this;return i._options=r,i._fetchFile=so.fetchFile,i.recordState="initial",i}return o.prototype.setFetchFile=function(r){this._fetchFile=r},o.prototype.setCapturing=function(r,i){this._imageType=r,this._capturing=i},o.prototype.setAnimator=function(r){this._animator=Nc(r)?r:new Ir(r)},o.prototype.getAudioFile=function(){return this._ffmpeg.FS("readFile","merge.mp3")},o.prototype.recordMedia=function(r,i){return Kt(this,void 0,void 0,function(){var c,l,h,m,b,E,S,_,A,k=this;return Zt(this,function(I){switch(I.label){case 0:return c=0,l=r.medias,h=r.duration,!h||!l?[2]:[4,this.init()];case 1:return m=I.sent(),[4,l.reduce(function(R,N){return Kt(k,void 0,void 0,function(){var B,j,W,U,X,ct,w,K,Y,at,pt,q;return Zt(this,function(Z){switch(Z.label){case 0:return[4,R];case 1:return Z.sent(),B=N.url,j=N.seek,W=N.delay,U=N.playSpeed,X=N.volume,ct=Lc(B)?B:zc((at=i?.inputPath)!==null&&at!==void 0?at:"",B),w=j[0],K=j[1],Y=(q=(pt=ct.match(/[^/]+$/g))===null||pt===void 0?void 0:pt[0])!==null&&q!==void 0?q:ct,[4,this.writeFile(Y,ct)];case 2:return Z.sent(),[4,m.run("-ss","".concat(w),"-to","".concat(K),"-i",Y,"-filter:a","adelay=".concat(W*U*1e3,"|").concat(W*U*1e3,",atempo=").concat(U,",volume=").concat(X),"audio".concat(c++,".mp3"))];case 3:return Z.sent(),[2]}})})},Promise.resolve())];case 2:return I.sent(),c?(b=m.FS("readdir","./"),E=b.filter(function(R){return R.match(/audio[\d]+.mp3/)}),S=E.length,S?(_=[],A=hn(),this.emit("processAudioStart",{audiosLength:S}),E.forEach(function(R){_.push("-i",R)}),m.setProgress(function(R){var N=R.ratio,B=A.getCurrentInfo(R.ratio),j=B.currentTime,W=B.expectedTime;k.emit("processAudio",{currentProcessingTime:j,expectedProcessingTime:W,ratio:N})}),[4,m.run.apply(m,Jt(Jt([],_,!1),["-filter_complex","amix=inputs=".concat(S,":duration=longest:dropout_transition=1000,volume=").concat(S),"merge.mp3"],!1))]):[2]):[2];case 3:return I.sent(),this.emit("processAudioEnd"),m.FS("readdir","./").indexOf("merge.mp3")>=0?(this._hasMedia=!0,[2,this.getAudioFile()]):[2]}})})},o.prototype.record=function(r){return r===void 0&&(r={}),Kt(this,void 0,void 0,function(){var i,c,l,h,m,b,E,S,_=this;return Zt(this,function(A){switch(A.label){case 0:return i=this.getRecordInfo(r),c=i.startFrame,l=i.endFrame,h=this._imageType,m=l-c+1,b=r.fps||60,E=0,this.recordState="loading",[4,this.init()];case 1:return A.sent(),S=hn(),this.emit("captureStart",{startFame:c,endFrame:l,startTime:i.startTime,endTime:i.endTime,duration:i.duation,multi:r.multi||1,imageType:h,fps:b}),this.recordState="capture",[4,Promise.all(i.loops.map(function(k,I){for(var R=Promise.resolve(),N=k.startFrame,B=k.endFrame,j=N;j<=B;++j){var W=function(U){return function(){return Kt(_,void 0,void 0,function(){var X,ct,w,K,Y,at;return Zt(this,function(pt){switch(pt.label){case 0:return X=U/b,[4,this._capturing({workerIndex:I,frame:U,time:X})];case 1:return ct=pt.sent(),[4,this.writeFile("frame".concat(U-c,".").concat(h),ct)];case 2:return pt.sent(),++E,w=E/m,K=S.getCurrentInfo(w),Y=K.currentTime,at=K.expectedTime,this.emit("capture",{ratio:w,frameCount:E,totalFrame:m,frameInfo:{frame:U,time:X},currentCapturingTime:Y,expectedCapturingTime:at}),[2]}})})}}(j);R=R.then(W)}return R}))];case 2:return A.sent(),this.emit("captureEnd"),[4,this.renderVideo(xr(xr({},r),{duration:i.duation}))];case 3:return[2,A.sent()]}})})},o.prototype.getRecordInfo=function(r){var i=this._animator,c=r.iteration,l=r.duration||0,h=r.startTime||0,m=r.fps||60,b=r.multi||1,E=c||i.getIterationCount(),S=i.getDelay(),_=i.getPlaySpeed(),A=i.getDuration(),k=0;E==="infinite"?k=c||1:k=c||E;for(var I=S+A*k,R=l>0?Math.min(h+l,I):I,N=Math.min(h,R),B=Math.floor(N*m/_),j=Math.ceil(R*m/_),W=Math.ceil((j-B)/b),U=[],X=0;X<b;++X)U.push({startFrame:B+W*X+(X===0?0:1),endFrame:B+W*(X+1)});return{duation:(R-N)/_,loops:U,iterationCount:k,startTime:N,endTime:R,startFrame:B,endFrame:j}},o.prototype.init=function(){return Kt(this,void 0,void 0,function(){var r;return Zt(this,function(i){switch(i.label){case 0:return this._ffmpeg=this._ffmpeg||so.createFFmpeg({log:this._options.log}),r=this._ffmpeg,this._ready||(this._ready=r.load()),[4,this._ready];case 1:return i.sent(),[2,r]}})})},o.prototype.writeFile=function(r,i){return Kt(this,void 0,void 0,function(){var c;return Zt(this,function(l){switch(l.label){case 0:return[4,this.init()];case 1:return l.sent(),[4,this._fetchFile(i)];case 2:return c=l.sent(),c?(this._ffmpeg.FS("writeFile",r,c),[2]):[2]}})})},o.prototype.renderVideo=function(r){return Kt(this,void 0,void 0,function(){var i,c,l,h,m,b,E,S,_,A,k,I,R,N,B,j,W,U=this;return Zt(this,function(X){switch(X.label){case 0:return i=r.ext,c=i===void 0?"mp4":i,l=r.fps,h=l===void 0?60:l,m=r.codec,b=r.duration,E=r.bitrate,S=r.cpuUsed,_=this._hasMedia,A=m||co[c||"mp4"]||co.mp4,k=E||"4096k",I=["-i","frame%d.".concat(this._imageType)],R=[],N=["-cpu-used","".concat(S||8),"-pix_fmt","yuva420p"],c==="webm"&&N.push("-row-mt","1"),_&&(I.push("-i","merge.mp3"),R.push("-acodec","aac","-b:a","128k","-ac","2")),[4,this.init()];case 1:return B=X.sent(),this.recordState="process",j=hn(),this.emit("processVideoStart",{ext:c,fps:h,codec:A,duration:b,bitrate:k,cpuUsed:S}),B.setProgress(function(ct){var w=ct.ratio,K=j.getCurrentInfo(ct.ratio),Y=K.currentTime,at=K.expectedTime;U.emit("processVideo",{currentProcessingTime:Y,expectedProcessingTime:at,ratio:w})}),[4,(W=B).run.apply(W,Jt(Jt(Jt(Jt(Jt(["-r","".concat(h)],I,!1),R,!1),["-c:v",A,"-loop","1","-t","".concat(b),"-y","-b:v",k],!1),N,!1),["output.".concat(c)],!1))];case 2:return X.sent(),this.emit("processVideoEnd"),this.recordState="initial",[2,B.FS("readFile","output.".concat(c))]}})})},o.prototype.exit=function(){var r;try{this.recordState="initial",this._ready=null,(r=this._ffmpeg)===null||r===void 0||r.exit()}catch{}this._ffmpeg=null},o.prototype.destroy=function(){this.off(),this.exit()},o}(Sr),Ce={exports:{}},$c=Ce.exports,uo;function Bc(){return uo||(uo=1,function(s,o){(function(r,i){s.exports=i()})($c,function(){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(a){b(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function c(e){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,R(a.key),a)}}function m(e,t,n){return t&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_(e,t)}function A(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,a=S(e);if(t){var u=S(this).constructor;n=Reflect.construct(a,arguments,u)}else n=a.apply(this,arguments);return function(f,p){if(p&&(typeof p=="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(f)}(this,n)}}function I(){return I=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var a=function(f,p){for(;!Object.prototype.hasOwnProperty.call(f,p)&&(f=S(f))!==null;);return f}(e,t);if(a){var u=Object.getOwnPropertyDescriptor(a,t);return u.get?u.get.call(arguments.length<3?e:n):u.value}},I.apply(this,arguments)}function R(e){var t=function(n,a){if(typeof n!="object"||n===null)return n;var u=n[Symbol.toPrimitive];if(u!==void 0){var f=u.call(n,a);if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e,"string");return typeof t=="symbol"?t:t+""}var N=function(e){return!(!e||!e.Window)&&e instanceof e.Window},B=void 0,j=void 0;function W(e){B=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&typeof e.wrap=="function"&&e.wrap(t)===t&&(e=e.wrap(e)),j=e}function U(e){return N(e)?e:(e.ownerDocument||e).defaultView||j.window}typeof window<"u"&&window&&W(window);var X=function(e){return!!e&&c(e)==="object"},ct=function(e){return typeof e=="function"},w={window:function(e){return e===j||N(e)},docFrag:function(e){return X(e)&&e.nodeType===11},object:X,func:ct,number:function(e){return typeof e=="number"},bool:function(e){return typeof e=="boolean"},string:function(e){return typeof e=="string"},element:function(e){if(!e||c(e)!=="object")return!1;var t=U(e)||j;return/object|function/.test(typeof Element>"u"?"undefined":c(Element))?e instanceof Element||e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"},plainObject:function(e){return X(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return X(e)&&e.length!==void 0&&ct(e.splice)}};function K(e){var t=e.interaction;if(t.prepared.name==="drag"){var n=t.prepared.axis;n==="x"?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):n==="y"&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function Y(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="drag"){var a=n.prepared.axis;if(a==="x"||a==="y"){var u=a==="x"?"y":"x";t.page[u]=n.coords.start.page[u],t.client[u]=n.coords.start.client[u],t.delta[u]=0}}}var at={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,a=e.defaults;n.prototype.draggable=at.draggable,t.map.drag=at,t.methodDict.drag="draggable",a.actions.drag=at.defaults},listeners:{"interactions:before-action-move":K,"interactions:action-resume":K,"interactions:action-move":Y,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,a=e.buttons,u=n.options.drag;if(u&&u.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(a&n.options.drag.mouseButtons)!=0))return e.action={name:"drag",axis:u.lockAxis==="start"?u.startAxis:u.lockAxis},!1}},draggable:function(e){return w.object(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):w.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:K,move:Y,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(e){return e.search("drag")===0}},pt=at,q={init:function(e){var t=e;q.document=t.document,q.DocumentFragment=t.DocumentFragment||Z,q.SVGElement=t.SVGElement||Z,q.SVGSVGElement=t.SVGSVGElement||Z,q.SVGElementInstance=t.SVGElementInstance||Z,q.Element=t.Element||Z,q.HTMLElement=t.HTMLElement||q.Element,q.Event=t.Event,q.Touch=t.Touch||Z,q.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function Z(){}var et=q,rt={init:function(e){var t=et.Element,n=e.navigator||{};rt.supportsTouch="ontouchstart"in e||w.func(e.DocumentTouch)&&et.document instanceof e.DocumentTouch,rt.supportsPointerEvent=n.pointerEnabled!==!1&&!!et.PointerEvent,rt.isIOS=/iP(hone|od|ad)/.test(n.platform),rt.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),rt.isIe9=/MSIE 9/.test(n.userAgent),rt.isOperaMobile=n.appName==="Opera"&&rt.supportsTouch&&/Presto/.test(n.userAgent),rt.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",rt.pEventTypes=rt.supportsPointerEvent?et.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,rt.wheelEvent=et.document&&"onmousewheel"in et.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},st=rt;function ht(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function bt(e,t){for(;w.element(e);){if(P(e,t))return e;e=C(e)}return null}function C(e){var t=e.parentNode;if(w.docFrag(t)){for(;(t=t.host)&&w.docFrag(t););return t}return t}function P(e,t){return j!==B&&(t=t.replace(/\/deep\//g," ")),e[st.prefixedMatchesSelector](t)}var O=function(e){return e.parentNode||e.host};function G(e,t){for(var n,a=[],u=e;(n=O(u))&&u!==t&&n!==u.ownerDocument;)a.unshift(u),u=n;return a}function L(e,t,n){for(;w.element(e);){if(P(e,t))return!0;if((e=C(e))===n)return P(e,t)}return!1}function J(e){return e.correspondingUseElement||e}function ut(e){var t=e instanceof et.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}function dt(e){var t,n=ut(e);if(!st.isIOS7&&n){var a={x:(t=(t=U(e))||j).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop};n.left+=a.x,n.right+=a.x,n.top+=a.y,n.bottom+=a.y}return n}function gt(e){for(var t=[];e;)t.push(e),e=C(e);return t}function vt(e){return!!w.string(e)&&(et.document.querySelector(e),!0)}function H(e,t){for(var n in t)e[n]=t[n];return e}function Rt(e,t,n){return e==="parent"?C(n):e==="self"?t.getRect(n):bt(n,e)}function xt(e,t,n,a){var u=e;return w.string(u)?u=Rt(u,t,n):w.func(u)&&(u=u.apply(void 0,a)),w.element(u)&&(u=dt(u)),u}function Xe(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}}function Pr(e){return!e||"x"in e&&"y"in e||((e=H({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e}function Ke(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top}function ve(e,t,n){var a=n&&e.options[n];return Xe(xt(a&&a.origin||e.options.origin,e,t,[e&&t]))||{x:0,y:0}}function Yt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(v){return!0},a=arguments.length>3?arguments[3]:void 0;if(a=a||{},w.string(e)&&e.search(" ")!==-1&&(e=Bn(e)),w.array(e))return e.forEach(function(v){return Yt(v,t,n,a)}),a;if(w.object(e)&&(t=e,e=""),w.func(t)&&n(e))a[e]=a[e]||[],a[e].push(t);else if(w.array(t))for(var u=0,f=t;u<f.length;u++){var p=f[u];Yt(e,p,n,a)}else if(w.object(t))for(var d in t)Yt(Bn(d).map(function(v){return"".concat(e).concat(v)}),t[d],n,a);return a}function Bn(e){return e.trim().split(/ +/)}var ge=function(e,t){return Math.sqrt(e*e+t*t)},Vo=["webkit","moz"];function Ze(e,t){e.__set||(e.__set={});var n=function(u){if(Vo.some(function(f){return u.indexOf(f)===0}))return 1;typeof e[u]!="function"&&u!=="__set"&&Object.defineProperty(e,u,{get:function(){return u in e.__set?e.__set[u]:e.__set[u]=t[u]},set:function(f){e.__set[u]=f},configurable:!0})};for(var a in t)n(a);return e}function Je(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp}function Gn(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0}function qn(e){return e instanceof et.Event||e instanceof et.Touch}function Qe(e,t,n){return e=e||"page",(n=n||{}).x=t[e+"X"],n.y=t[e+"Y"],n}function Hn(e,t){return t=t||{x:0,y:0},st.isOperaMobile&&qn(e)?(Qe("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):Qe("page",e,t),t}function me(e){return w.number(e.pointerId)?e.pointerId:e.identifier}function Wo(e,t,n){var a=t.length>1?Yn(t):t[0];Hn(a,e.page),function(u,f){f=f||{},st.isOperaMobile&&qn(u)?Qe("screen",u,f):Qe("client",u,f)}(a,e.client),e.timeStamp=n}function Mr(e){var t=[];return w.array(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function Yn(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var a=e[n];for(var u in t)t[u]+=a[u]}for(var f in t)t[f]/=e.length;return t}function Cr(e){if(!e.length)return null;var t=Mr(e),n=Math.min(t[0].pageX,t[1].pageX),a=Math.min(t[0].pageY,t[1].pageY),u=Math.max(t[0].pageX,t[1].pageX),f=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:a,left:n,top:a,right:u,bottom:f,width:u-n,height:f-a}}function Fr(e,t){var n=t+"X",a=t+"Y",u=Mr(e),f=u[0][n]-u[1][n],p=u[0][a]-u[1][a];return ge(f,p)}function Dr(e,t){var n=t+"X",a=t+"Y",u=Mr(e),f=u[1][n]-u[0][n],p=u[1][a]-u[0][a];return 180*Math.atan2(p,f)/Math.PI}function Vn(e){return w.string(e.pointerType)?e.pointerType:w.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof et.Touch?"touch":"mouse"}function Wn(e){var t=w.func(e.composedPath)?e.composedPath():e.path;return[J(t?t[0]:e.target),J(e.currentTarget)]}var tr=function(){function e(t){l(this,e),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=t}return m(e,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),e}();Object.defineProperty(tr.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Xn=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}return e},Kn=function(e){return Xn([],e)},ye=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1},be=function(e,t){return e[ye(e,t)]},ne=function(e){E(n,e);var t=k(n);function n(a,u,f){var p;l(this,n),(p=t.call(this,u._interaction)).dropzone=void 0,p.dragEvent=void 0,p.relatedTarget=void 0,p.draggable=void 0,p.propagationStopped=!1,p.immediatePropagationStopped=!1;var d=f==="dragleave"?a.prev:a.cur,v=d.element,y=d.dropzone;return p.type=f,p.target=v,p.currentTarget=v,p.dropzone=y,p.dragEvent=u,p.relatedTarget=u.target,p.draggable=u.interactable,p.timeStamp=u.timeStamp,p}return m(n,[{key:"reject",value:function(){var a=this,u=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&u.cur.dropzone===this.dropzone&&u.cur.element===this.target)if(u.prev.dropzone=this.dropzone,u.prev.element=this.target,u.rejected=!0,u.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var f=u.activeDrops,p=ye(f,function(v){var y=v.dropzone,g=v.element;return y===a.dropzone&&g===a.target});u.activeDrops.splice(p,1);var d=new n(u,this.dragEvent,"dropdeactivate");d.dropzone=this.dropzone,d.target=this.target,this.dropzone.fire(d)}else this.dropzone.fire(new n(u,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),n}(tr);function Zn(e,t){for(var n=0,a=e.slice();n<a.length;n++){var u=a[n],f=u.dropzone,p=u.element;t.dropzone=f,t.target=p,f.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function Ar(e,t){for(var n=function(f,p){for(var d=[],v=0,y=f.interactables.list;v<y.length;v++){var g=y[v];if(g.options.drop.enabled){var x=g.options.drop.accept;if(!(w.element(x)&&x!==p||w.string(x)&&!P(p,x)||w.func(x)&&!x({dropzone:g,draggableElement:p})))for(var T=0,F=g.getAllElements();T<F.length;T++){var M=F[T];M!==p&&d.push({dropzone:g,element:M,rect:g.getRect(M)})}}}return d}(e,t),a=0;a<n.length;a++){var u=n[a];u.rect=u.dropzone.getRect(u.element)}return n}function Jn(e,t,n){for(var a=e.dropState,u=e.interactable,f=e.element,p=[],d=0,v=a.activeDrops;d<v.length;d++){var y=v[d],g=y.dropzone,x=y.element,T=y.rect,F=g.dropCheck(t,n,u,f,x,T);p.push(F?x:null)}var M=function(D){for(var $,z,V,nt=[],ot=0;ot<D.length;ot++){var Q=D[ot],it=D[$];if(Q&&ot!==$)if(it){var yt=O(Q),ft=O(it);if(yt!==Q.ownerDocument)if(ft!==Q.ownerDocument)if(yt!==ft){nt=nt.length?nt:G(it);var Et=void 0;if(it instanceof et.HTMLElement&&Q instanceof et.SVGElement&&!(Q instanceof et.SVGSVGElement)){if(Q===ft)continue;Et=Q.ownerSVGElement}else Et=Q;for(var _t=G(Et,it.ownerDocument),At=0;_t[At]&&_t[At]===nt[At];)At++;var ur=[_t[At-1],_t[At],nt[At]];if(ur[0])for(var Oe=ur[0].lastChild;Oe;){if(Oe===ur[1]){$=ot,nt=_t;break}if(Oe===ur[2])break;Oe=Oe.previousSibling}}else V=it,(parseInt(U(z=Q).getComputedStyle(z).zIndex,10)||0)>=(parseInt(U(V).getComputedStyle(V).zIndex,10)||0)&&($=ot);else $=ot}else $=ot}return $}(p);return a.activeDrops[M]||null}function kr(e,t,n){var a=e.dropState,u={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return n.type==="dragstart"&&(u.activate=new ne(a,n,"dropactivate"),u.activate.target=null,u.activate.dropzone=null),n.type==="dragend"&&(u.deactivate=new ne(a,n,"dropdeactivate"),u.deactivate.target=null,u.deactivate.dropzone=null),a.rejected||(a.cur.element!==a.prev.element&&(a.prev.dropzone&&(u.leave=new ne(a,n,"dragleave"),n.dragLeave=u.leave.target=a.prev.element,n.prevDropzone=u.leave.dropzone=a.prev.dropzone),a.cur.dropzone&&(u.enter=new ne(a,n,"dragenter"),n.dragEnter=a.cur.element,n.dropzone=a.cur.dropzone)),n.type==="dragend"&&a.cur.dropzone&&(u.drop=new ne(a,n,"drop"),n.dropzone=a.cur.dropzone,n.relatedTarget=a.cur.element),n.type==="dragmove"&&a.cur.dropzone&&(u.move=new ne(a,n,"dropmove"),n.dropzone=a.cur.dropzone)),u}function jr(e,t){var n=e.dropState,a=n.activeDrops,u=n.cur,f=n.prev;t.leave&&f.dropzone.fire(t.leave),t.enter&&u.dropzone.fire(t.enter),t.move&&u.dropzone.fire(t.move),t.drop&&u.dropzone.fire(t.drop),t.deactivate&&Zn(a,t.deactivate),n.prev.dropzone=u.dropzone,n.prev.element=u.element}function Qn(e,t){var n=e.interaction,a=e.iEvent,u=e.event;if(a.type==="dragmove"||a.type==="dragend"){var f=n.dropState;t.dynamicDrop&&(f.activeDrops=Ar(t,n.element));var p=a,d=Jn(n,p,u);f.rejected=f.rejected&&!!d&&d.dropzone===f.cur.dropzone&&d.element===f.cur.element,f.cur.dropzone=d&&d.dropzone,f.cur.element=d&&d.element,f.events=kr(n,0,p)}}var ti={id:"actions/drop",install:function(e){var t=e.actions,n=e.interactStatic,a=e.Interactable,u=e.defaults;e.usePlugin(pt),a.prototype.dropzone=function(f){return function(p,d){if(w.object(d)){if(p.options.drop.enabled=d.enabled!==!1,d.listeners){var v=Yt(d.listeners),y=Object.keys(v).reduce(function(x,T){return x[/^(enter|leave)/.test(T)?"drag".concat(T):/^(activate|deactivate|move)/.test(T)?"drop".concat(T):T]=v[T],x},{}),g=p.options.drop.listeners;g&&p.off(g),p.on(y),p.options.drop.listeners=y}return w.func(d.ondrop)&&p.on("drop",d.ondrop),w.func(d.ondropactivate)&&p.on("dropactivate",d.ondropactivate),w.func(d.ondropdeactivate)&&p.on("dropdeactivate",d.ondropdeactivate),w.func(d.ondragenter)&&p.on("dragenter",d.ondragenter),w.func(d.ondragleave)&&p.on("dragleave",d.ondragleave),w.func(d.ondropmove)&&p.on("dropmove",d.ondropmove),/^(pointer|center)$/.test(d.overlap)?p.options.drop.overlap=d.overlap:w.number(d.overlap)&&(p.options.drop.overlap=Math.max(Math.min(1,d.overlap),0)),"accept"in d&&(p.options.drop.accept=d.accept),"checker"in d&&(p.options.drop.checker=d.checker),p}return w.bool(d)?(p.options.drop.enabled=d,p):p.options.drop}(this,f)},a.prototype.dropCheck=function(f,p,d,v,y,g){return function(x,T,F,M,D,$,z){var V=!1;if(!(z=z||x.getRect($)))return!!x.options.drop.checker&&x.options.drop.checker(T,F,V,x,$,M,D);var nt=x.options.drop.overlap;if(nt==="pointer"){var ot=ve(M,D,"drag"),Q=Hn(T);Q.x+=ot.x,Q.y+=ot.y;var it=Q.x>z.left&&Q.x<z.right,yt=Q.y>z.top&&Q.y<z.bottom;V=it&&yt}var ft=M.getRect(D);if(ft&&nt==="center"){var Et=ft.left+ft.width/2,_t=ft.top+ft.height/2;V=Et>=z.left&&Et<=z.right&&_t>=z.top&&_t<=z.bottom}return ft&&w.number(nt)&&(V=Math.max(0,Math.min(z.right,ft.right)-Math.max(z.left,ft.left))*Math.max(0,Math.min(z.bottom,ft.bottom)-Math.max(z.top,ft.top))/(ft.width*ft.height)>=nt),x.options.drop.checker&&(V=x.options.drop.checker(T,F,V,x,$,M,D)),V}(this,f,p,d,v,y,g)},n.dynamicDrop=function(f){return w.bool(f)?(e.dynamicDrop=f,n):e.dynamicDrop},H(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,u.actions.drop=ti.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;t.prepared.name==="drag"&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,a=(e.event,e.iEvent);if(n.prepared.name==="drag"){var u=n.dropState;u.activeDrops=[],u.events={},u.activeDrops=Ar(t,n.element),u.events=kr(n,0,a),u.events.activate&&(Zn(u.activeDrops,u.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:a}))}},"interactions:action-move":Qn,"interactions:after-action-move":function(e,t){var n=e.interaction,a=e.iEvent;if(n.prepared.name==="drag"){var u=n.dropState;jr(n,u.events),t.fire("actions/drop:move",{interaction:n,dragEvent:a}),u.events={}}},"interactions:action-end":function(e,t){if(e.interaction.prepared.name==="drag"){var n=e.interaction,a=e.iEvent;Qn(e,t),jr(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:a})}},"interactions:stop":function(e){var t=e.interaction;if(t.prepared.name==="drag"){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:Ar,getDrop:Jn,getDropEvents:kr,fireDropEvents:jr,filterEventType:function(e){return e.search("drag")===0||e.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Xo=ti;function Rr(e){var t=e.interaction,n=e.iEvent,a=e.phase;if(t.prepared.name==="gesture"){var u=t.pointers.map(function(y){return y.pointer}),f=a==="start",p=a==="end",d=t.interactable.options.deltaSource;if(n.touches=[u[0],u[1]],f)n.distance=Fr(u,d),n.box=Cr(u),n.scale=1,n.ds=0,n.angle=Dr(u,d),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(p||t.pointers.length<2){var v=t.prevEvent;n.distance=v.distance,n.box=v.box,n.scale=v.scale,n.ds=0,n.angle=v.angle,n.da=0}else n.distance=Fr(u,d),n.box=Cr(u),n.scale=n.distance/t.gesture.startDistance,n.angle=Dr(u,d),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,w.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}var Lr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,a=e.defaults;n.prototype.gesturable=function(u){return w.object(u)?(this.options.gesture.enabled=u.enabled!==!1,this.setPerAction("gesture",u),this.setOnEvents("gesture",u),this):w.bool(u)?(this.options.gesture.enabled=u,this):this.options.gesture},t.map.gesture=Lr,t.methodDict.gesture="gesturable",a.actions.gesture=Lr.defaults},listeners:{"interactions:action-start":Rr,"interactions:action-move":Rr,"interactions:action-end":Rr,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(e){return e.search("gesture")===0}},Ko=Lr;function Zo(e,t,n,a,u,f,p){if(!t)return!1;if(t===!0){var d=w.number(f.width)?f.width:f.right-f.left,v=w.number(f.height)?f.height:f.bottom-f.top;if(p=Math.min(p,Math.abs((e==="left"||e==="right"?d:v)/2)),d<0&&(e==="left"?e="right":e==="right"&&(e="left")),v<0&&(e==="top"?e="bottom":e==="bottom"&&(e="top")),e==="left"){var y=d>=0?f.left:f.right;return n.x<y+p}if(e==="top"){var g=v>=0?f.top:f.bottom;return n.y<g+p}if(e==="right")return n.x>(d>=0?f.right:f.left)-p;if(e==="bottom")return n.y>(v>=0?f.bottom:f.top)-p}return!!w.element(a)&&(w.element(t)?t===a:L(a,t,u))}function ei(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="resize"&&n.resizeAxes){var a=t;n.interactable.options.resize.square?(n.resizeAxes==="y"?a.delta.x=a.delta.y:a.delta.y=a.delta.x,a.axes="xy"):(a.axes=n.resizeAxes,n.resizeAxes==="x"?a.delta.y=0:n.resizeAxes==="y"&&(a.delta.x=0))}}var Ft,Vt,Dt={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,a=e.Interactable,u=e.defaults;Dt.cursors=function(f){return f.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),Dt.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,a.prototype.resizable=function(f){return function(p,d,v){return w.object(d)?(p.options.resize.enabled=d.enabled!==!1,p.setPerAction("resize",d),p.setOnEvents("resize",d),w.string(d.axis)&&/^x$|^y$|^xy$/.test(d.axis)?p.options.resize.axis=d.axis:d.axis===null&&(p.options.resize.axis=v.defaults.actions.resize.axis),w.bool(d.preserveAspectRatio)?p.options.resize.preserveAspectRatio=d.preserveAspectRatio:w.bool(d.square)&&(p.options.resize.square=d.square),p):w.bool(d)?(p.options.resize.enabled=d,p):p.options.resize}(this,f,e)},t.map.resize=Dt,t.methodDict.resize="resizable",u.actions.resize=Dt.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){(function(t){var n=t.iEvent,a=t.interaction;if(a.prepared.name==="resize"&&a.prepared.edges){var u=n,f=a.rect;a._rects={start:H({},f),corrected:H({},f),previous:H({},f),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},u.edges=a.prepared.edges,u.rect=a._rects.corrected,u.deltaRect=a._rects.delta}})(e),ei(e)},"interactions:action-move":function(e){(function(t){var n=t.iEvent,a=t.interaction;if(a.prepared.name==="resize"&&a.prepared.edges){var u=n,f=a.interactable.options.resize.invert,p=f==="reposition"||f==="negate",d=a.rect,v=a._rects,y=v.start,g=v.corrected,x=v.delta,T=v.previous;if(H(T,g),p){if(H(g,d),f==="reposition"){if(g.top>g.bottom){var F=g.top;g.top=g.bottom,g.bottom=F}if(g.left>g.right){var M=g.left;g.left=g.right,g.right=M}}}else g.top=Math.min(d.top,y.bottom),g.bottom=Math.max(d.bottom,y.top),g.left=Math.min(d.left,y.right),g.right=Math.max(d.right,y.left);for(var D in g.width=g.right-g.left,g.height=g.bottom-g.top,g)x[D]=g[D]-T[D];u.edges=a.prepared.edges,u.rect=g,u.deltaRect=x}})(e),ei(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if(n.prepared.name==="resize"&&n.prepared.edges){var a=t;a.edges=n.prepared.edges,a.rect=n._rects.corrected,a.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,a=e.element,u=e.rect,f=e.buttons;if(u){var p=H({},t.coords.cur.page),d=n.options.resize;if(d&&d.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(f&d.mouseButtons)!=0)){if(w.object(d.edges)){var v={left:!1,right:!1,top:!1,bottom:!1};for(var y in v)v[y]=Zo(y,d.edges[y],p,t._latestPointer.eventTarget,a,u,d.margin||Dt.defaultMargin);v.left=v.left&&!v.right,v.top=v.top&&!v.bottom,(v.left||v.right||v.top||v.bottom)&&(e.action={name:"resize",edges:v})}else{var g=d.axis!=="y"&&p.x>u.right-Dt.defaultMargin,x=d.axis!=="x"&&p.y>u.bottom-Dt.defaultMargin;(g||x)&&(e.action={name:"resize",axes:(g?"x":"")+(x?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,a=e.name,u=Dt.cursors,f=null;if(n)f=u[a+n];else if(t){for(var p="",d=0,v=["top","bottom","left","right"];d<v.length;d++){var y=v[d];t[y]&&(p+=y)}f=u[p]}return f},filterEventType:function(e){return e.search("resize")===0},defaultMargin:null},Jo=Dt,Qo={id:"actions",install:function(e){e.usePlugin(Ko),e.usePlugin(Jo),e.usePlugin(pt),e.usePlugin(Xo)}},ri=0,Lt={request:function(e){return Ft(e)},cancel:function(e){return Vt(e)},init:function(e){if(Ft=e.requestAnimationFrame,Vt=e.cancelAnimationFrame,!Ft)for(var t=["ms","moz","webkit","o"],n=0;n<t.length;n++){var a=t[n];Ft=e["".concat(a,"RequestAnimationFrame")],Vt=e["".concat(a,"CancelAnimationFrame")]||e["".concat(a,"CancelRequestAnimationFrame")]}Ft=Ft&&Ft.bind(e),Vt=Vt&&Vt.bind(e),Ft||(Ft=function(u){var f=Date.now(),p=Math.max(0,16-(f-ri)),d=e.setTimeout(function(){u(f+p)},p);return ri=f+p,d},Vt=function(u){return clearTimeout(u)})}},tt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){tt.isScrolling=!0,Lt.cancel(tt.i),e.autoScroll=tt,tt.interaction=e,tt.prevTime=tt.now(),tt.i=Lt.request(tt.scroll)},stop:function(){tt.isScrolling=!1,tt.interaction&&(tt.interaction.autoScroll=null),Lt.cancel(tt.i)},scroll:function(){var e=tt.interaction,t=e.interactable,n=e.element,a=e.prepared.name,u=t.options[a].autoScroll,f=ni(u.container,t,n),p=tt.now(),d=(p-tt.prevTime)/1e3,v=u.speed*d;if(v>=1){var y={x:tt.x*v,y:tt.y*v};if(y.x||y.y){var g=ii(f);w.window(f)?f.scrollBy(y.x,y.y):f&&(f.scrollLeft+=y.x,f.scrollTop+=y.y);var x=ii(f),T={x:x.x-g.x,y:x.y-g.y};(T.x||T.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:T,interaction:e,container:f})}tt.prevTime=p}tt.isScrolling&&(Lt.cancel(tt.i),tt.i=Lt.request(tt.scroll))},check:function(e,t){var n;return(n=e.options[t].autoScroll)==null?void 0:n.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&tt.check(t.interactable,t.prepared.name))if(t.simulation)tt.x=tt.y=0;else{var a,u,f,p,d=t.interactable,v=t.element,y=t.prepared.name,g=d.options[y].autoScroll,x=ni(g.container,d,v);if(w.window(x))p=n.clientX<tt.margin,a=n.clientY<tt.margin,u=n.clientX>x.innerWidth-tt.margin,f=n.clientY>x.innerHeight-tt.margin;else{var T=ut(x);p=n.clientX<T.left+tt.margin,a=n.clientY<T.top+tt.margin,u=n.clientX>T.right-tt.margin,f=n.clientY>T.bottom-tt.margin}tt.x=u?1:p?-1:0,tt.y=f?1:a?-1:0,tt.isScrolling||(tt.margin=g.margin,tt.speed=g.speed,tt.start(t))}}};function ni(e,t,n){return(w.string(e)?Rt(e,t,n):e)||U(n)}function ii(e){return w.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var ta={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;e.autoScroll=tt,tt.now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=tt.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,tt.stop(),tt.interaction&&(tt.interaction=null)},"interactions:stop":tt.stop,"interactions:action-move":function(e){return tt.onInteractionMove(e)}}},ea=ta;function xe(e,t){var n=!1;return function(){return n||(j.console.warn(t),n=!0),e.apply(this,arguments)}}function zr(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e}function ra(e){return w.bool(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor}function na(e){return w.func(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker}var ia={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(n,a,u,f){var p=function(d,v,y,g,x){var T=d.getRect(g),F=v.buttons||{0:1,1:4,3:8,4:16}[v.button],M={action:null,interactable:d,interaction:y,element:g,rect:T,buttons:F};return x.fire("auto-start:check",M),M.action}(this,a,u,f,e);return this.options.actionChecker?this.options.actionChecker(n,a,p,this,f,u):p},t.prototype.ignoreFrom=xe(function(n){return this._backCompatOption("ignoreFrom",n)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=xe(function(n){return this._backCompatOption("allowFrom",n)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=na,t.prototype.styleCursor=ra}};function oi(e,t,n,a,u){return t.testIgnoreAllow(t.options[e.name],n,a)&&t.options[e.name].enabled&&er(t,n,e,u)?e:null}function oa(e,t,n,a,u,f,p){for(var d=0,v=a.length;d<v;d++){var y=a[d],g=u[d],x=y.getAction(t,n,e,g);if(x){var T=oi(x,y,g,f,p);if(T)return{action:T,interactable:y,element:g}}}return{action:null,interactable:null,element:null}}function ai(e,t,n,a,u){var f=[],p=[],d=a;function v(g){f.push(g),p.push(d)}for(;w.element(d);){f=[],p=[],u.interactables.forEachMatch(d,v);var y=oa(e,t,n,f,p,a,u);if(y.action&&!y.interactable.options[y.action.name].manualStart)return y;d=C(d)}return{action:null,interactable:null,element:null}}function si(e,t,n){var a=t.action,u=t.interactable,f=t.element;a=a||{name:null},e.interactable=u,e.element=f,zr(e.prepared,a),e.rect=u&&a.name?u.getRect(f):null,ui(e,n),n.fire("autoStart:prepared",{interaction:e})}function er(e,t,n,a){var u=e.options,f=u[n.name].max,p=u[n.name].maxPerElement,d=a.autoStart.maxInteractions,v=0,y=0,g=0;if(!(f&&p&&d))return!1;for(var x=0,T=a.interactions.list;x<T.length;x++){var F=T[x],M=F.prepared.name;if(F.interacting()&&(++v>=d||F.interactable===e&&((y+=M===n.name?1:0)>=f||F.element===t&&(g++,M===n.name&&g>=p))))return!1}return d>0}function ci(e,t){return w.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function Nr(e,t,n){var a=n.autoStart.cursorElement;a&&a!==e&&(a.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function ui(e,t){var n=e.interactable,a=e.element,u=e.prepared;if(e.pointerType==="mouse"&&n&&n.options.styleCursor){var f="";if(u.name){var p=n.options[u.name].cursorChecker;f=w.func(p)?p(u,n,a,e._interacting):t.actions.map[u.name].getCursor(u)}Nr(e.element,f||"",t)}else t.autoStart.cursorElement&&Nr(t.autoStart.cursorElement,"",t)}var aa={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,n=e.defaults;e.usePlugin(ia),n.base.actionChecker=null,n.base.styleCursor=!0,H(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(a){return ci(a,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:er,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,a=e.pointer,u=e.event,f=e.eventTarget;n.interacting()||si(n,ai(n,a,u,f,t),t)},"interactions:move":function(e,t){(function(n,a){var u=n.interaction,f=n.pointer,p=n.event,d=n.eventTarget;u.pointerType!=="mouse"||u.pointerIsDown||u.interacting()||si(u,ai(u,f,p,d,a),a)})(e,t),function(n,a){var u=n.interaction;if(u.pointerIsDown&&!u.interacting()&&u.pointerWasMoved&&u.prepared.name){a.fire("autoStart:before-start",n);var f=u.interactable,p=u.prepared.name;p&&f&&(f.options[p].manualStart||!er(f,u.element,u.prepared,a)?u.stop():(u.start(u.prepared,f,u.element),ui(u,a)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,a=n.interactable;a&&a.options.styleCursor&&Nr(n.element,"",t)}},maxInteractions:ci,withinInteractionLimit:er,validateAction:oi},Ur=aa,sa={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var n=e.interaction,a=e.eventTarget,u=e.dx,f=e.dy;if(n.prepared.name==="drag"){var p=Math.abs(u),d=Math.abs(f),v=n.interactable.options.drag,y=v.startAxis,g=p>d?"x":p<d?"y":"xy";if(n.prepared.axis=v.lockAxis==="start"?g[0]:v.lockAxis,g!=="xy"&&y!=="xy"&&y!==g){n.prepared.name=null;for(var x=a,T=function(M){if(M!==n.interactable){var D=n.interactable.options.drag;if(!D.manualStart&&M.testIgnoreAllow(D,x,a)){var $=M.getAction(n.downPointer,n.downEvent,n,x);if($&&$.name==="drag"&&function(z,V){if(!V)return!1;var nt=V.options.drag.startAxis;return z==="xy"||nt==="xy"||nt===z}(g,M)&&Ur.validateAction($,M,x,a,t))return M}}};w.element(x);){var F=t.interactables.forEachMatch(x,T);if(F){n.prepared.name="drag",n.interactable=F,n.element=x;break}x=C(x)}}}}}};function $r(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}var ca={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(Ur),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=$r(t);n>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!n&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;$r(t)>0&&(t.prepared.name=null)}},getHoldDuration:$r},ua=ca,la={id:"auto-start",install:function(e){e.usePlugin(Ur),e.usePlugin(ua),e.usePlugin(sa)}},fa=function(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):w.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault};function pa(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}var li={id:"core/interactablePreventDefault",install:function(e){var t=e.Interactable;t.prototype.preventDefault=fa,t.prototype.checkAndPreventDefault=function(n){return function(a,u,f){var p=a.options.preventDefault;if(p!=="never")if(p!=="always"){if(u.events.supportsPassive&&/^touch(start|move)$/.test(f.type)){var d=U(f.target).document,v=u.getDocOptions(d);if(!v||!v.events||v.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(f.type)||w.element(f.target)&&P(f.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||f.preventDefault()}else f.preventDefault()}(this,e,n)},e.interactions.docEvents.push({type:"dragstart",listener:function(n){for(var a=0,u=e.interactions.list;a<u.length;a++){var f=u[a];if(f.element&&(f.element===n.target||ht(f.element,n.target)))return void f.interactable.checkAndPreventDefault(n)}}})},listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=pa,e},{})};function rr(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(e.indexOf(n)===0&&e.substr(n.length)in t.phases)return!0;return!1}function ie(e){var t={};for(var n in e){var a=e[n];w.plainObject(a)?t[n]=ie(a):w.array(a)?t[n]=Kn(a):t[n]=a}return t}var Br=function(){function e(t){l(this,e),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=t,this.result=nr(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return m(e,[{key:"start",value:function(t,n){var a,u,f=t.phase,p=this.interaction,d=function(y){var g=y.interactable.options[y.prepared.name],x=g.modifiers;return x&&x.length?x:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(T){var F=g[T];return F&&F.enabled&&{options:F,methods:F._methods}}).filter(function(T){return!!T})}(p);this.prepareStates(d),this.startEdges=H({},p.edges),this.edges=H({},this.startEdges),this.startOffset=(a=p.rect,u=n,a?{left:u.x-a.left,top:u.y-a.top,right:a.right-u.x,bottom:a.bottom-u.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var v=this.fillArg({phase:f,pageCoords:n,preEnd:!1});return this.result=nr(),this.startAll(v),this.result=this.setAll(v)}},{key:"fillArg",value:function(t){var n=this.interaction;return t.interaction=n,t.interactable=n.interactable,t.element=n.element,t.rect||(t.rect=n.rect),t.edges||(t.edges=this.startEdges),t.startOffset=this.startOffset,t}},{key:"startAll",value:function(t){for(var n=0,a=this.states;n<a.length;n++){var u=a[n];u.methods.start&&(t.state=u,u.methods.start(t))}}},{key:"setAll",value:function(t){var n=t.phase,a=t.preEnd,u=t.skipModifiers,f=t.rect,p=t.edges;t.coords=H({},t.pageCoords),t.rect=H({},f),t.edges=H({},p);for(var d=u?this.states.slice(u):this.states,v=nr(t.coords,t.rect),y=0;y<d.length;y++){var g,x=d[y],T=x.options,F=H({},t.coords),M=null;(g=x.methods)!=null&&g.set&&this.shouldDo(T,a,n)&&(t.state=x,M=x.methods.set(t),Ke(t.edges,t.rect,{x:t.coords.x-F.x,y:t.coords.y-F.y})),v.eventProps.push(M)}H(this.edges,t.edges),v.delta.x=t.coords.x-t.pageCoords.x,v.delta.y=t.coords.y-t.pageCoords.y,v.rectDelta.left=t.rect.left-f.left,v.rectDelta.right=t.rect.right-f.right,v.rectDelta.top=t.rect.top-f.top,v.rectDelta.bottom=t.rect.bottom-f.bottom;var D=this.result.coords,$=this.result.rect;if(D&&$){var z=v.rect.left!==$.left||v.rect.right!==$.right||v.rect.top!==$.top||v.rect.bottom!==$.bottom;v.changed=z||D.x!==v.coords.x||D.y!==v.coords.y}return v}},{key:"applyToInteraction",value:function(t){var n=this.interaction,a=t.phase,u=n.coords.cur,f=n.coords.start,p=this.result,d=this.startDelta,v=p.delta;a==="start"&&H(this.startDelta,p.delta);for(var y=0,g=[[f,d],[u,v]];y<g.length;y++){var x=g[y],T=x[0],F=x[1];T.page.x+=F.x,T.page.y+=F.y,T.client.x+=F.x,T.client.y+=F.y}var M=this.result.rectDelta,D=t.rect||n.rect;D.left+=M.left,D.right+=M.right,D.top+=M.top,D.bottom+=M.bottom,D.width=D.right-D.left,D.height=D.bottom-D.top}},{key:"setAndApply",value:function(t){var n=this.interaction,a=t.phase,u=t.preEnd,f=t.skipModifiers,p=this.setAll(this.fillArg({preEnd:u,phase:a,pageCoords:t.modifiedCoords||n.coords.cur.page}));if(this.result=p,!p.changed&&(!f||f<this.states.length)&&n.interacting())return!1;if(t.modifiedCoords){var d=n.coords.cur.page,v={x:t.modifiedCoords.x-d.x,y:t.modifiedCoords.y-d.y};p.coords.x+=v.x,p.coords.y+=v.y,p.delta.x+=v.x,p.delta.y+=v.y}this.applyToInteraction(t)}},{key:"beforeEnd",value:function(t){var n=t.interaction,a=t.event,u=this.states;if(u&&u.length){for(var f=!1,p=0;p<u.length;p++){var d=u[p];t.state=d;var v=d.options,y=d.methods,g=y.beforeEnd&&y.beforeEnd(t);if(g)return this.endResult=g,!1;f=f||!f&&this.shouldDo(v,!0,t.phase,!0)}f&&n.move({event:a,preEnd:!0})}}},{key:"stop",value:function(t){var n=t.interaction;if(this.states&&this.states.length){var a=H({states:this.states,interactable:n.interactable,element:n.element,rect:null},t);this.fillArg(a);for(var u=0,f=this.states;u<f.length;u++){var p=f[u];a.state=p,p.methods.stop&&p.methods.stop(a)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(t){this.states=[];for(var n=0;n<t.length;n++){var a=t[n],u=a.options,f=a.methods,p=a.name;this.states.push({options:u,methods:f,index:n,name:p})}return this.states}},{key:"restoreInteractionCoords",value:function(t){var n=t.interaction,a=n.coords,u=n.rect,f=n.modification;if(f.result){for(var p=f.startDelta,d=f.result,v=d.delta,y=d.rectDelta,g=0,x=[[a.start,p],[a.cur,v]];g<x.length;g++){var T=x[g],F=T[0],M=T[1];F.page.x-=M.x,F.page.y-=M.y,F.client.x-=M.x,F.client.y-=M.y}u.left-=y.left,u.right-=y.right,u.top-=y.top,u.bottom-=y.bottom}}},{key:"shouldDo",value:function(t,n,a,u){return!(!t||t.enabled===!1||u&&!t.endOnly||t.endOnly&&!n||a==="start"&&!t.setStart)}},{key:"copyFrom",value:function(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.startEdges=t.startEdges,this.edges=t.edges,this.states=t.states.map(function(n){return ie(n)}),this.result=nr(H({},t.result.coords),H({},t.result.rect))}},{key:"destroy",value:function(){for(var t in this)this[t]=null}}]),e}();function nr(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function zt(e,t){var n=e.defaults,a={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},u=function(f){var p=f||{};for(var d in p.enabled=p.enabled!==!1,n)d in p||(p[d]=n[d]);var v={options:p,methods:a,name:t,enable:function(){return p.enabled=!0,v},disable:function(){return p.enabled=!1,v}};return v};return t&&typeof t=="string"&&(u._defaults=n,u._methods=a),u}function Ee(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}var ha={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new Br(t)},"interactions:before-action-start":function(e){var t=e.interaction,n=e.interaction.modification;n.start(e,t.coords.start.page),t.edges=n.edges,n.applyToInteraction(e)},"interactions:before-action-move":function(e){var t=e.interaction,n=t.modification,a=n.setAndApply(e);return t.edges=n.edges,a},"interactions:before-action-end":function(e){var t=e.interaction,n=t.modification,a=n.beforeEnd(e);return t.edges=n.startEdges,a},"interactions:action-start":Ee,"interactions:action-move":Ee,"interactions:action-end":Ee,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}},fi=ha,pi={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Gr=function(e){E(n,e);var t=k(n);function n(a,u,f,p,d,v,y){var g;l(this,n),(g=t.call(this,a)).relatedTarget=null,g.screenX=void 0,g.screenY=void 0,g.button=void 0,g.buttons=void 0,g.ctrlKey=void 0,g.shiftKey=void 0,g.altKey=void 0,g.metaKey=void 0,g.page=void 0,g.client=void 0,g.delta=void 0,g.rect=void 0,g.x0=void 0,g.y0=void 0,g.t0=void 0,g.dt=void 0,g.duration=void 0,g.clientX0=void 0,g.clientY0=void 0,g.velocity=void 0,g.speed=void 0,g.swipe=void 0,g.axes=void 0,g.preEnd=void 0,d=d||a.element;var x=a.interactable,T=(x&&x.options||pi).deltaSource,F=ve(x,d,f),M=p==="start",D=p==="end",$=M?A(g):a.prevEvent,z=M?a.coords.start:D?{page:$.page,client:$.client,timeStamp:a.coords.cur.timeStamp}:a.coords.cur;return g.page=H({},z.page),g.client=H({},z.client),g.rect=H({},a.rect),g.timeStamp=z.timeStamp,D||(g.page.x-=F.x,g.page.y-=F.y,g.client.x-=F.x,g.client.y-=F.y),g.ctrlKey=u.ctrlKey,g.altKey=u.altKey,g.shiftKey=u.shiftKey,g.metaKey=u.metaKey,g.button=u.button,g.buttons=u.buttons,g.target=d,g.currentTarget=d,g.preEnd=v,g.type=y||f+(p||""),g.interactable=x,g.t0=M?a.pointers[a.pointers.length-1].downTime:$.t0,g.x0=a.coords.start.page.x-F.x,g.y0=a.coords.start.page.y-F.y,g.clientX0=a.coords.start.client.x-F.x,g.clientY0=a.coords.start.client.y-F.y,g.delta=M||D?{x:0,y:0}:{x:g[T].x-$[T].x,y:g[T].y-$[T].y},g.dt=a.coords.delta.timeStamp,g.duration=g.timeStamp-g.t0,g.velocity=H({},a.coords.velocity[T]),g.speed=ge(g.velocity.x,g.velocity.y),g.swipe=D||p==="inertiastart"?g.getSwipe():null,g}return m(n,[{key:"getSwipe",value:function(){var a=this._interaction;if(a.prevEvent.speed<600||this.timeStamp-a.prevEvent.timeStamp>150)return null;var u=180*Math.atan2(a.prevEvent.velocityY,a.prevEvent.velocityX)/Math.PI;u<0&&(u+=360);var f=112.5<=u&&u<247.5,p=202.5<=u&&u<337.5;return{up:p,down:!p&&22.5<=u&&u<157.5,left:f,right:!f&&(292.5<=u||u<67.5),angle:u,speed:a.prevEvent.speed,velocity:{x:a.prevEvent.velocityX,y:a.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),n}(tr);Object.defineProperties(Gr.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var da=m(function e(t,n,a,u,f){l(this,e),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=t,this.pointer=n,this.event=a,this.downTime=u,this.downTarget=f}),va=function(e){return e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy="",e}({}),hi=function(e){return e.start="",e.move="",e.end="",e.stop="",e.interacting="",e}({}),ga=0,ma=function(){function e(t){var n=this,a=t.pointerType,u=t.scopeFire;l(this,e),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=xe(function(g){this.move(g)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=ga++,this._scopeFire=u,this.pointerType=a;var f=this;this._proxy={};var p=function(g){Object.defineProperty(n._proxy,g,{get:function(){return f[g]}})};for(var d in va)p(d);var v=function(g){Object.defineProperty(n._proxy,g,{value:function(){return f[g].apply(f,arguments)}})};for(var y in hi)v(y);this._scopeFire("interactions:new",{interaction:this})}return m(e,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(t,n,a){var u=this.updatePointer(t,n,a,!0),f=this.pointers[u];this._scopeFire("interactions:down",{pointer:t,event:n,eventTarget:a,pointerIndex:u,pointerInfo:f,type:"down",interaction:this})}},{key:"start",value:function(t,n,a){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(t.name==="gesture"?2:1)||!n.options[t.name].enabled)&&(zr(this.prepared,t),this.interactable=n,this.element=a,this.rect=n.getRect(a),this.edges=this.prepared.edges?H({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(t,n,a){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,n,a,!1);var u,f,p=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(u=this.coords.cur.client.x-this.coords.start.client.x,f=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=ge(u,f)>this.pointerMoveTolerance);var d,v,y,g=this.getPointerIndex(t),x={pointer:t,pointerIndex:g,pointerInfo:this.pointers[g],event:n,type:"move",eventTarget:a,dx:u,dy:f,duplicate:p,interaction:this};p||(d=this.coords.velocity,v=this.coords.delta,y=Math.max(v.timeStamp/1e3,.001),d.page.x=v.page.x/y,d.page.y=v.page.y/y,d.client.x=v.client.x/y,d.client.y=v.client.y/y,d.timeStamp=y),this._scopeFire("interactions:move",x),p||this.simulation||(this.interacting()&&(x.type=null,this.move(x)),this.pointerWasMoved&&Je(this.coords.prev,this.coords.cur))}},{key:"move",value:function(t){t&&t.event||Gn(this.coords.delta),(t=H({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}},{key:"pointerUp",value:function(t,n,a,u){var f=this.getPointerIndex(t);f===-1&&(f=this.updatePointer(t,n,a,!1));var p=/cancel$/i.test(n.type)?"cancel":"up";this._scopeFire("interactions:".concat(p),{pointer:t,pointerIndex:f,pointerInfo:this.pointers[f],event:n,eventTarget:a,type:p,curEventTarget:u,interaction:this}),this.simulation||this.end(n),this.removePointer(t,n)}},{key:"documentBlur",value:function(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}},{key:"end",value:function(t){var n;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(n=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,n===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(t){var n=me(t);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:ye(this.pointers,function(a){return a.id===n})}},{key:"getPointerInfo",value:function(t){return this.pointers[this.getPointerIndex(t)]}},{key:"updatePointer",value:function(t,n,a,u){var f,p,d,v=me(t),y=this.getPointerIndex(t),g=this.pointers[y];return u=u!==!1&&(u||/(down|start)$/i.test(n.type)),g?g.pointer=t:(g=new da(v,t,n,null,null),y=this.pointers.length,this.pointers.push(g)),Wo(this.coords.cur,this.pointers.map(function(x){return x.pointer}),this._now()),f=this.coords.delta,p=this.coords.prev,d=this.coords.cur,f.page.x=d.page.x-p.page.x,f.page.y=d.page.y-p.page.y,f.client.x=d.client.x-p.client.x,f.client.y=d.client.y-p.client.y,f.timeStamp=d.timeStamp-p.timeStamp,u&&(this.pointerIsDown=!0,g.downTime=this.coords.cur.timeStamp,g.downTarget=a,Ze(this.downPointer,t),this.interacting()||(Je(this.coords.start,this.coords.cur),Je(this.coords.prev,this.coords.cur),this.downEvent=n,this.pointerWasMoved=!1)),this._updateLatestPointer(t,n,a),this._scopeFire("interactions:update-pointer",{pointer:t,event:n,eventTarget:a,down:u,pointerInfo:g,pointerIndex:y,interaction:this}),y}},{key:"removePointer",value:function(t,n){var a=this.getPointerIndex(t);if(a!==-1){var u=this.pointers[a];this._scopeFire("interactions:remove-pointer",{pointer:t,event:n,eventTarget:null,pointerIndex:a,pointerInfo:u,interaction:this}),this.pointers.splice(a,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(t,n,a){this._latestPointer.pointer=t,this._latestPointer.event=n,this._latestPointer.eventTarget=a}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(t,n,a,u){return new Gr(this,t,this.prepared.name,n,this.element,a,u)}},{key:"_fireEvent",value:function(t){var n;(n=this.interactable)==null||n.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}},{key:"_doPhase",value:function(t){var n=t.event,a=t.phase,u=t.preEnd,f=t.type,p=this.rect;if(p&&a==="move"&&(Ke(this.edges,p,this.coords.delta[this.interactable.options.deltaSource]),p.width=p.right-p.left,p.height=p.bottom-p.top),this._scopeFire("interactions:before-action-".concat(a),t)===!1)return!1;var d=t.iEvent=this._createPreparedEvent(n,a,u,f);return this._scopeFire("interactions:action-".concat(a),t),a==="start"&&(this.prevEvent=d),this._fireEvent(d),this._scopeFire("interactions:after-action-".concat(a),t),!0}},{key:"_now",value:function(){return Date.now()}}]),e}();function di(e){vi(e.interaction)}function vi(e){if(!function(n){return!(!n.offset.pending.x&&!n.offset.pending.y)}(e))return!1;var t=e.offset.pending;return qr(e.coords.cur,t),qr(e.coords.delta,t),Ke(e.edges,e.rect,t),t.x=0,t.y=0,!0}function ya(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function qr(e,t){var n=e.page,a=e.client,u=t.x,f=t.y;n.x+=u,n.y+=f,a.x+=u,a.y+=f}hi.offsetBy="";var ba={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=ya},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return function(t){t.pointerIsDown&&(qr(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}(e.interaction)},"interactions:before-action-start":di,"interactions:before-action-move":di,"interactions:before-action-end":function(e){var t=e.interaction;if(vi(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}},gi=ba,xa=function(){function e(t){l(this,e),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=t}return m(e,[{key:"start",value:function(t){var n=this.interaction,a=ir(n);if(!a||!a.enabled)return!1;var u=n.coords.velocity.client,f=ge(u.x,u.y),p=this.modification||(this.modification=new Br(n));if(p.copyFrom(n.modification),this.t0=n._now(),this.allowResume=a.allowResume,this.v0=f,this.currentOffset={x:0,y:0},this.startCoords=n.coords.cur.page,this.modifierArg=p.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-n.coords.cur.timeStamp<50&&f>a.minSpeed&&f>a.endSpeed)this.startInertia();else{if(p.result=p.setAll(this.modifierArg),!p.result.changed)return!1;this.startSmoothEnd()}return n.modification.result.rect=null,n.offsetBy(this.targetOffset),n._doPhase({interaction:n,event:t,phase:"inertiastart"}),n.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),n.modification.result.rect=null,this.active=!0,n.simulation=this,!0}},{key:"startInertia",value:function(){var t=this,n=this.interaction.coords.velocity.client,a=ir(this.interaction),u=a.resistance,f=-Math.log(a.endSpeed/this.v0)/u;this.targetOffset={x:(n.x-f)/u,y:(n.y-f)/u},this.te=f,this.lambda_v0=u/this.v0,this.one_ve_v0=1-a.endSpeed/this.v0;var p=this.modification,d=this.modifierArg;d.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},p.result=p.setAll(d),p.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+p.result.delta.x,y:this.targetOffset.y+p.result.delta.y}),this.onNextFrame(function(){return t.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var t=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return t.smoothEndTick()})}},{key:"onNextFrame",value:function(t){var n=this;this.timeout=Lt.request(function(){n.active&&t()})}},{key:"inertiaTick",value:function(){var t,n,a,u,f,p,d,v=this,y=this.interaction,g=ir(y).resistance,x=(y._now()-this.t0)/1e3;if(x<this.te){var T,F=1-(Math.exp(-g*x)-this.lambda_v0)/this.one_ve_v0;this.isModified?(t=0,n=0,a=this.targetOffset.x,u=this.targetOffset.y,f=this.modifiedOffset.x,p=this.modifiedOffset.y,T={x:mi(d=F,t,a,f),y:mi(d,n,u,p)}):T={x:this.targetOffset.x*F,y:this.targetOffset.y*F};var M={x:T.x-this.currentOffset.x,y:T.y-this.currentOffset.y};this.currentOffset.x+=M.x,this.currentOffset.y+=M.y,y.offsetBy(M),y.move(),this.onNextFrame(function(){return v.inertiaTick()})}else y.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var t=this,n=this.interaction,a=n._now()-this.t0,u=ir(n).smoothEndDuration;if(a<u){var f={x:yi(a,0,this.targetOffset.x,u),y:yi(a,0,this.targetOffset.y,u)},p={x:f.x-this.currentOffset.x,y:f.y-this.currentOffset.y};this.currentOffset.x+=p.x,this.currentOffset.y+=p.y,n.offsetBy(p),n.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return t.smoothEndTick()})}else n.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(t){var n=t.pointer,a=t.event,u=t.eventTarget,f=this.interaction;f.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),f.updatePointer(n,a,u,!0),f._doPhase({interaction:f,event:a,phase:"resume"}),Je(f.coords.prev,f.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Lt.cancel(this.timeout)}}]),e}();function ir(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}var Ea={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(gi),e.usePlugin(fi),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new xa(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return(!t._interacting||t.simulation||!t.inertia.start(n))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,a=t.inertia;if(a.active)for(var u=n;w.element(u);){if(u===t.element){a.resume(e);break}u=C(u)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":Ee,"interactions:action-inertiastart":Ee,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};function mi(e,t,n,a){var u=1-e;return u*u*t+2*u*e*n+e*e*a}function yi(e,t,n,a){return-n*(e/=a)*(e-2)+t}var wa=Ea;function bi(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(e.immediatePropagationStopped)break;a(e)}}var xi=function(){function e(t){l(this,e),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=H({},t||{})}return m(e,[{key:"fire",value:function(t){var n,a=this.global;(n=this.types[t.type])&&bi(t,n),!t.propagationStopped&&a&&(n=a[t.type])&&bi(t,n)}},{key:"on",value:function(t,n){var a=Yt(t,n);for(t in a)this.types[t]=Xn(this.types[t]||[],a[t])}},{key:"off",value:function(t,n){var a=Yt(t,n);for(t in a){var u=this.types[t];if(u&&u.length)for(var f=0,p=a[t];f<p.length;f++){var d=p[f],v=u.indexOf(d);v!==-1&&u.splice(v,1)}}}},{key:"getRect",value:function(t){return null}}]),e}(),Sa=function(){function e(t){l(this,e),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=t,Ze(this,t)}return m(e,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),e}();function we(e){return w.object(e)?{capture:!!e.capture,passive:!!e.passive}:{capture:!!e,passive:!1}}function or(e,t){return e===t||(typeof e=="boolean"?!!t.capture===e&&!t.passive:!!e.capture==!!t.capture&&!!e.passive==!!t.passive)}var Ta={id:"events",install:function(e){var t,n=[],a={},u=[],f={add:p,remove:d,addDelegate:function(g,x,T,F,M){var D=we(M);if(!a[T]){a[T]=[];for(var $=0;$<u.length;$++){var z=u[$];p(z,T,v),p(z,T,y,!0)}}var V=a[T],nt=be(V,function(ot){return ot.selector===g&&ot.context===x});nt||(nt={selector:g,context:x,listeners:[]},V.push(nt)),nt.listeners.push({func:F,options:D})},removeDelegate:function(g,x,T,F,M){var D,$=we(M),z=a[T],V=!1;if(z)for(D=z.length-1;D>=0;D--){var nt=z[D];if(nt.selector===g&&nt.context===x){for(var ot=nt.listeners,Q=ot.length-1;Q>=0;Q--){var it=ot[Q];if(it.func===F&&or(it.options,$)){ot.splice(Q,1),ot.length||(z.splice(D,1),d(x,T,v),d(x,T,y,!0)),V=!0;break}}if(V)break}}},delegateListener:v,delegateUseCapture:y,delegatedEvents:a,documents:u,targets:n,supportsOptions:!1,supportsPassive:!1};function p(g,x,T,F){if(g.addEventListener){var M=we(F),D=be(n,function($){return $.eventTarget===g});D||(D={eventTarget:g,events:{}},n.push(D)),D.events[x]||(D.events[x]=[]),be(D.events[x],function($){return $.func===T&&or($.options,M)})||(g.addEventListener(x,T,f.supportsOptions?M:M.capture),D.events[x].push({func:T,options:M}))}}function d(g,x,T,F){if(g.addEventListener&&g.removeEventListener){var M=ye(n,function(yt){return yt.eventTarget===g}),D=n[M];if(D&&D.events)if(x!=="all"){var $=!1,z=D.events[x];if(z){if(T==="all"){for(var V=z.length-1;V>=0;V--){var nt=z[V];d(g,x,nt.func,nt.options)}return}for(var ot=we(F),Q=0;Q<z.length;Q++){var it=z[Q];if(it.func===T&&or(it.options,ot)){g.removeEventListener(x,T,f.supportsOptions?ot:ot.capture),z.splice(Q,1),z.length===0&&(delete D.events[x],$=!0);break}}}$&&!Object.keys(D.events).length&&n.splice(M,1)}else for(x in D.events)D.events.hasOwnProperty(x)&&d(g,x,"all")}}function v(g,x){for(var T=we(x),F=new Sa(g),M=a[g.type],D=Wn(g)[0],$=D;w.element($);){for(var z=0;z<M.length;z++){var V=M[z],nt=V.selector,ot=V.context;if(P($,nt)&&ht(ot,D)&&ht(ot,$)){var Q=V.listeners;F.currentTarget=$;for(var it=0;it<Q.length;it++){var yt=Q[it];or(yt.options,T)&&yt.func(F)}}}$=C($)}}function y(g){return v(g,!0)}return(t=e.document)==null||t.createElement("div").addEventListener("test",null,{get capture(){return f.supportsOptions=!0},get passive(){return f.supportsPassive=!0}}),e.events=f,f}},Hr={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0,n=Hr.methodOrder;t<n.length;t++){var a=n[t],u=Hr[a](e);if(u)return u}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,a=e.eventTarget,u=e.scope;if(!/down|start/i.test(n))return null;for(var f=0,p=u.interactions.list;f<p.length;f++){var d=p[f],v=a;if(d.simulation&&d.simulation.allowResume&&d.pointerType===t)for(;v;){if(v===d.element)return d;v=C(v)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,a=e.pointerType,u=e.eventType,f=e.scope;if(a!=="mouse"&&a!=="pen")return null;for(var p=0,d=f.interactions.list;p<d.length;p++){var v=d[p];if(v.pointerType===a){if(v.simulation&&!Ei(v,n))continue;if(v.interacting())return v;t||(t=v)}}if(t)return t;for(var y=0,g=f.interactions.list;y<g.length;y++){var x=g[y];if(!(x.pointerType!==a||/down/i.test(u)&&x.simulation))return x}return null},hasPointer:function(e){for(var t=e.pointerId,n=0,a=e.scope.interactions.list;n<a.length;n++){var u=a[n];if(Ei(u,t))return u}return null},idle:function(e){for(var t=e.pointerType,n=0,a=e.scope.interactions.list;n<a.length;n++){var u=a[n];if(u.pointers.length===1){var f=u.interactable;if(f&&(!f.options.gesture||!f.options.gesture.enabled))continue}else if(u.pointers.length>=2)continue;if(!u.interacting()&&t===u.pointerType)return u}return null}};function Ei(e,t){return e.pointers.some(function(n){return n.id===t})}var Oa=Hr,Yr=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function wi(e,t){return function(n){var a=t.interactions.list,u=Vn(n),f=Wn(n),p=f[0],d=f[1],v=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(var y=0,g=n.changedTouches;y<g.length;y++){var x=g[y],T={pointer:x,pointerId:me(x),pointerType:u,eventType:n.type,eventTarget:p,curEventTarget:d,scope:t},F=Si(T);v.push([T.pointer,T.eventTarget,T.curEventTarget,F])}}else{var M=!1;if(!st.supportsPointerEvent&&/mouse/.test(n.type)){for(var D=0;D<a.length&&!M;D++)M=a[D].pointerType!=="mouse"&&a[D].pointerIsDown;M=M||t.now()-t.prevTouchTime<500||n.timeStamp===0}if(!M){var $={pointer:n,pointerId:me(n),pointerType:u,eventType:n.type,curEventTarget:d,eventTarget:p,scope:t},z=Si($);v.push([$.pointer,$.eventTarget,$.curEventTarget,z])}}for(var V=0;V<v.length;V++){var nt=v[V],ot=nt[0],Q=nt[1],it=nt[2];nt[3][e](ot,n,Q,it)}}}function Si(e){var t=e.pointerType,n=e.scope,a={interaction:Oa.search(e),searchDetails:e};return n.fire("interactions:find",a),a.interaction||n.interactions.new({pointerType:t})}function Vr(e,t){var n=e.doc,a=e.scope,u=e.options,f=a.interactions.docEvents,p=a.events,d=p[t];for(var v in a.browser.isIOS&&!u.events&&(u.events={passive:!1}),p.delegatedEvents)d(n,v,p.delegateListener),d(n,v,p.delegateUseCapture,!0);for(var y=u&&u.events,g=0;g<f.length;g++){var x=f[g];d(n,x.type,x.listener,y)}}var _a={id:"core/interactions",install:function(e){for(var t={},n=0;n<Yr.length;n++){var a=Yr[n];t[a]=wi(a,e)}var u,f=st.pEventTypes;function p(){for(var d=0,v=e.interactions.list;d<v.length;d++){var y=v[d];if(y.pointerIsDown&&y.pointerType==="touch"&&!y._interacting)for(var g=function(){var F=T[x];e.documents.some(function(M){return ht(M.doc,F.downTarget)})||y.removePointer(F.pointer,F.event)},x=0,T=y.pointers;x<T.length;x++)g()}}(u=et.PointerEvent?[{type:f.down,listener:p},{type:f.down,listener:t.pointerDown},{type:f.move,listener:t.pointerMove},{type:f.up,listener:t.pointerUp},{type:f.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:p},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(d){for(var v=0,y=e.interactions.list;v<y.length;v++)y[v].documentBlur(d)}}),e.prevTouchTime=0,e.Interaction=function(d){E(y,d);var v=k(y);function y(){return l(this,y),v.apply(this,arguments)}return m(y,[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(g){e.interactions.pointerMoveTolerance=g}},{key:"_now",value:function(){return e.now()}}]),y}(ma),e.interactions={list:[],new:function(d){d.scopeFire=function(y,g){return e.fire(y,g)};var v=new e.Interaction(d);return e.interactions.list.push(v),v},listeners:t,docEvents:u,pointerMoveTolerance:1},e.usePlugin(li)},listeners:{"scope:add-document":function(e){return Vr(e,"add")},"scope:remove-document":function(e){return Vr(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,a=t.interactions.list.length-1;a>=0;a--){var u=t.interactions.list[a];u.interactable===n&&(u.stop(),t.fire("interactions:destroy",{interaction:u}),u.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(a,1))}}},onDocSignal:Vr,doOnInteractions:wi,methodNames:Yr},Ia=_a,Nt=function(e){return e[e.On=0]="On",e[e.Off=1]="Off",e}(Nt||{}),Pa=function(){function e(t,n,a,u){l(this,e),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new xi,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=n.actions,this.target=t,this._context=n.context||a,this._win=U(vt(t)?this._context:t),this._doc=this._win.document,this._scopeEvents=u,this.set(n)}return m(e,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(t,n){return w.func(n.onstart)&&this.on("".concat(t,"start"),n.onstart),w.func(n.onmove)&&this.on("".concat(t,"move"),n.onmove),w.func(n.onend)&&this.on("".concat(t,"end"),n.onend),w.func(n.oninertiastart)&&this.on("".concat(t,"inertiastart"),n.oninertiastart),this}},{key:"updatePerActionListeners",value:function(t,n,a){var u,f=this,p=(u=this._actions.map[t])==null?void 0:u.filterEventType,d=function(v){return(p==null||p(v))&&rr(v,f._actions)};(w.array(n)||w.object(n))&&this._onOff(Nt.Off,t,n,void 0,d),(w.array(a)||w.object(a))&&this._onOff(Nt.On,t,a,void 0,d)}},{key:"setPerAction",value:function(t,n){var a=this._defaults;for(var u in n){var f=u,p=this.options[t],d=n[f];f==="listeners"&&this.updatePerActionListeners(t,p.listeners,d),w.array(d)?p[f]=Kn(d):w.plainObject(d)?(p[f]=H(p[f]||{},ie(d)),w.object(a.perAction[f])&&"enabled"in a.perAction[f]&&(p[f].enabled=d.enabled!==!1)):w.bool(d)&&w.object(a.perAction[f])?p[f].enabled=d:p[f]=d}}},{key:"getRect",value:function(t){return t=t||(w.element(this.target)?this.target:null),w.string(this.target)&&(t=t||this._context.querySelector(this.target)),dt(t)}},{key:"rectChecker",value:function(t){var n=this;return w.func(t)?(this.getRect=function(a){var u=H({},t.apply(n,a));return"width"in u||(u.width=u.right-u.left,u.height=u.bottom-u.top),u},this):t===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(t,n){if(vt(n)||w.object(n)){for(var a in this.options[t]=n,this._actions.map)this.options[a][t]=n;return this}return this.options[t]}},{key:"origin",value:function(t){return this._backCompatOption("origin",t)}},{key:"deltaSource",value:function(t){return t==="page"||t==="client"?(this.options.deltaSource=t,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var t=this.target;return w.string(t)?Array.from(this._context.querySelectorAll(t)):w.func(t)&&t.getAllElements?t.getAllElements():w.element(t)?[t]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(t){return this._context===t.ownerDocument||ht(this._context,t)}},{key:"testIgnoreAllow",value:function(t,n,a){return!this.testIgnore(t.ignoreFrom,n,a)&&this.testAllow(t.allowFrom,n,a)}},{key:"testAllow",value:function(t,n,a){return!t||!!w.element(a)&&(w.string(t)?L(a,t,n):!!w.element(t)&&ht(t,a))}},{key:"testIgnore",value:function(t,n,a){return!(!t||!w.element(a))&&(w.string(t)?L(a,t,n):!!w.element(t)&&ht(t,a))}},{key:"fire",value:function(t){return this.events.fire(t),this}},{key:"_onOff",value:function(t,n,a,u,f){w.object(n)&&!w.array(n)&&(u=a,a=null);var p=Yt(n,a,f);for(var d in p){d==="wheel"&&(d=st.wheelEvent);for(var v=0,y=p[d];v<y.length;v++){var g=y[v];rr(d,this._actions)?this.events[t===Nt.On?"on":"off"](d,g):w.string(this.target)?this._scopeEvents[t===Nt.On?"addDelegate":"removeDelegate"](this.target,this._context,d,g,u):this._scopeEvents[t===Nt.On?"add":"remove"](this.target,d,g,u)}}return this}},{key:"on",value:function(t,n,a){return this._onOff(Nt.On,t,n,a)}},{key:"off",value:function(t,n,a){return this._onOff(Nt.Off,t,n,a)}},{key:"set",value:function(t){var n=this._defaults;for(var a in w.object(t)||(t={}),this.options=ie(n.base),this._actions.methodDict){var u=a,f=this._actions.methodDict[u];this.options[u]={},this.setPerAction(u,H(H({},n.perAction),n.actions[u])),this[f](t[u])}for(var p in t)p!=="getRect"?w.func(this[p])&&this[p](t[p]):this.rectChecker(t.getRect);return this}},{key:"unset",value:function(){if(w.string(this.target))for(var t in this._scopeEvents.delegatedEvents)for(var n=this._scopeEvents.delegatedEvents[t],a=n.length-1;a>=0;a--){var u=n[a],f=u.selector,p=u.context,d=u.listeners;f===this.target&&p===this._context&&n.splice(a,1);for(var v=d.length-1;v>=0;v--)this._scopeEvents.removeDelegate(this.target,this._context,t,d[v][0],d[v][1])}else this._scopeEvents.remove(this.target,"all")}}]),e}(),Ma=function(){function e(t){var n=this;l(this,e),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=t,t.addListeners({"interactable:unset":function(a){var u=a.interactable,f=u.target,p=w.string(f)?n.selectorMap[f]:f[n.scope.id],d=ye(p,function(v){return v===u});p.splice(d,1)}})}return m(e,[{key:"new",value:function(t,n){n=H(n||{},{actions:this.scope.actions});var a=new this.scope.Interactable(t,n,this.scope.document,this.scope.events);return this.scope.addDocument(a._doc),this.list.push(a),w.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(a)):(a.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(a)),this.scope.fire("interactable:new",{target:t,options:n,interactable:a,win:this.scope._win}),a}},{key:"getExisting",value:function(t,n){var a=n&&n.context||this.scope.document,u=w.string(t),f=u?this.selectorMap[t]:t[this.scope.id];if(f)return be(f,function(p){return p._context===a&&(u||p.inContext(t))})}},{key:"forEachMatch",value:function(t,n){for(var a=0,u=this.list;a<u.length;a++){var f=u[a],p=void 0;if((w.string(f.target)?w.element(t)&&P(t,f.target):t===f.target)&&f.inContext(t)&&(p=n(f)),p!==void 0)return p}}}]),e}(),Ca=function(){function e(){var t=this;l(this,e),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=st,this.defaults=ie(pi),this.Eventable=xi,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(a){var u=function f(p,d){var v=a.interactables.getExisting(p,d);return v||((v=a.interactables.new(p,d)).events.global=f.globalEvents),v};return u.getPointerAverage=Yn,u.getTouchBBox=Cr,u.getTouchDistance=Fr,u.getTouchAngle=Dr,u.getElementRect=dt,u.getElementClientRect=ut,u.matchesSelector=P,u.closest=bt,u.globalEvents={},u.version="1.10.27",u.scope=a,u.use=function(f,p){return this.scope.usePlugin(f,p),this},u.isSet=function(f,p){return!!this.scope.interactables.get(f,p&&p.context)},u.on=xe(function(f,p,d){if(w.string(f)&&f.search(" ")!==-1&&(f=f.trim().split(/ +/)),w.array(f)){for(var v=0,y=f;v<y.length;v++){var g=y[v];this.on(g,p,d)}return this}if(w.object(f)){for(var x in f)this.on(x,f[x],p);return this}return rr(f,this.scope.actions)?this.globalEvents[f]?this.globalEvents[f].push(p):this.globalEvents[f]=[p]:this.scope.events.add(this.scope.document,f,p,{options:d}),this},"The interact.on() method is being deprecated"),u.off=xe(function(f,p,d){if(w.string(f)&&f.search(" ")!==-1&&(f=f.trim().split(/ +/)),w.array(f)){for(var v=0,y=f;v<y.length;v++){var g=y[v];this.off(g,p,d)}return this}if(w.object(f)){for(var x in f)this.off(x,f[x],p);return this}var T;return rr(f,this.scope.actions)?f in this.globalEvents&&(T=this.globalEvents[f].indexOf(p))!==-1&&this.globalEvents[f].splice(T,1):this.scope.events.remove(this.scope.document,f,p,d),this},"The interact.off() method is being deprecated"),u.debug=function(){return this.scope},u.supportsTouch=function(){return st.supportsTouch},u.supportsPointerEvent=function(){return st.supportsPointerEvent},u.stop=function(){for(var f=0,p=this.scope.interactions.list;f<p.length;f++)p[f].stop();return this},u.pointerMoveTolerance=function(f){return w.number(f)?(this.scope.interactions.pointerMoveTolerance=f,this):this.scope.interactions.pointerMoveTolerance},u.addDocument=function(f,p){this.scope.addDocument(f,p)},u.removeDocument=function(f){this.scope.removeDocument(f)},u}(this),this.InteractEvent=Gr,this.Interactable=void 0,this.interactables=new Ma(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(a){return t.removeDocument(a.target)};var n=this;this.Interactable=function(a){E(f,a);var u=k(f);function f(){return l(this,f),u.apply(this,arguments)}return m(f,[{key:"_defaults",get:function(){return n.defaults}},{key:"set",value:function(p){return I(S(f.prototype),"set",this).call(this,p),n.fire("interactable:set",{options:p,interactable:this}),this}},{key:"unset",value:function(){I(S(f.prototype),"unset",this).call(this);var p=n.interactables.list.indexOf(this);p<0||(n.interactables.list.splice(p,1),n.fire("interactable:unset",{interactable:this}))}}]),f}(Pa)}return m(e,[{key:"addListeners",value:function(t,n){this.listenerMaps.push({id:n,map:t})}},{key:"fire",value:function(t,n){for(var a=0,u=this.listenerMaps;a<u.length;a++){var f=u[a].map[t];if(f&&f(n,this,t)===!1)return!1}}},{key:"init",value:function(t){return this.isInitialized?this:function(n,a){return n.isInitialized=!0,w.window(a)&&W(a),et.init(a),st.init(a),Lt.init(a),n.window=a,n.document=a.document,n.usePlugin(Ia),n.usePlugin(Ta),n}(this,t)}},{key:"pluginIsInstalled",value:function(t){var n=t.id;return n?!!this._plugins.map[n]:this._plugins.list.indexOf(t)!==-1}},{key:"usePlugin",value:function(t,n){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,n),t.listeners&&t.before){for(var a=0,u=this.listenerMaps.length,f=t.before.reduce(function(d,v){return d[v]=!0,d[Ti(v)]=!0,d},{});a<u;a++){var p=this.listenerMaps[a].id;if(p&&(f[p]||f[Ti(p)]))break}this.listenerMaps.splice(a,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,n){if(this.getDocIndex(t)!==-1)return!1;var a=U(t);n=n?H({},n):{},this.documents.push({doc:t,options:n}),this.events.documents.push(t),t!==this.document&&this.events.add(a,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:a,scope:this,options:n})}},{key:"removeDocument",value:function(t){var n=this.getDocIndex(t),a=U(t),u=this.documents[n].options;this.events.remove(a,"unload",this.onWindowUnload),this.documents.splice(n,1),this.events.documents.splice(n,1),this.fire("scope:remove-document",{doc:t,window:a,scope:this,options:u})}},{key:"getDocIndex",value:function(t){for(var n=0;n<this.documents.length;n++)if(this.documents[n].doc===t)return n;return-1}},{key:"getDocOptions",value:function(t){var n=this.getDocIndex(t);return n===-1?null:this.documents[n].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function Ti(e){return e&&e.replace(/\/.*$/,"")}var Oi=new Ca,mt=Oi.interactStatic,Fa=typeof globalThis<"u"?globalThis:window;Oi.init(Fa);var Da=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(a){var u=a[0],f=a[1];return u in e||f in e}),n=function(a,u){for(var f=e.range,p=e.limits,d=p===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:p,v=e.offset,y=v===void 0?{x:0,y:0}:v,g={range:f,grid:e,x:null,y:null},x=0;x<t.length;x++){var T=t[x],F=T[0],M=T[1],D=Math.round((a-y.x)/e[F]),$=Math.round((u-y.y)/e[M]);g[F]=Math.max(d.left,Math.min(d.right,D*e[F]+y.x)),g[M]=Math.max(d.top,Math.min(d.bottom,$*e[M]+y.y))}return g};return n.grid=e,n.coordFields=t,n}}),Aa={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=H(t.snappers||{},Da),t.createSnapGrid=t.snappers.grid}},ka=Aa,ja={start:function(e){var t=e.state,n=e.rect,a=e.edges,u=e.pageCoords,f=t.options,p=f.ratio,d=f.enabled,v=t.options,y=v.equalDelta,g=v.modifiers;p==="preserve"&&(p=n.width/n.height),t.startCoords=H({},u),t.startRect=H({},n),t.ratio=p,t.equalDelta=y;var x=t.linkedEdges={top:a.top||a.left&&!a.bottom,left:a.left||a.top&&!a.right,bottom:a.bottom||a.right&&!a.top,right:a.right||a.bottom&&!a.left};if(t.xIsPrimaryAxis=!(!a.left&&!a.right),t.equalDelta){var T=(x.left?1:-1)*(x.top?1:-1);t.edgeSign={x:T,y:T}}else t.edgeSign={x:x.left?-1:1,y:x.top?-1:1};if(d!==!1&&H(a,x),g!=null&&g.length){var F=new Br(e.interaction);F.copyFrom(e.interaction.modification),F.prepareStates(g),t.subModification=F,F.startAll(i({},e))}},set:function(e){var t=e.state,n=e.rect,a=e.coords,u=t.linkedEdges,f=H({},a),p=t.equalDelta?Ra:La;if(H(e.edges,u),p(t,t.xIsPrimaryAxis,a,n),!t.subModification)return null;var d=H({},n);Ke(u,d,{x:a.x-f.x,y:a.y-f.y});var v=t.subModification.setAll(i(i({},e),{},{rect:d,edges:u,pageCoords:a,prevCoords:a,prevRect:d})),y=v.delta;return v.changed&&(p(t,Math.abs(y.x)>Math.abs(y.y),v.coords,v.rect),H(a,v.coords)),v.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Ra(e,t,n){var a=e.startCoords,u=e.edgeSign;t?n.y=a.y+(n.x-a.x)*u.y:n.x=a.x+(n.y-a.y)*u.x}function La(e,t,n,a){var u=e.startRect,f=e.startCoords,p=e.ratio,d=e.edgeSign;if(t){var v=a.width/p;n.y=f.y+(v-u.height)*d.y}else{var y=a.height*p;n.x=f.x+(y-u.width)*d.x}}var za=zt(ja,"aspectRatio"),_i=function(){};_i._defaults={};var ar=_i;function Wt(e,t,n){return w.func(e)?xt(e,t.interactable,t.element,[n.x,n.y,t]):xt(e,t.interactable,t.element)}var sr={start:function(e){var t=e.rect,n=e.startOffset,a=e.state,u=e.interaction,f=e.pageCoords,p=a.options,d=p.elementRect,v=H({left:0,top:0,right:0,bottom:0},p.offset||{});if(t&&d){var y=Wt(p.restriction,u,f);if(y){var g=y.right-y.left-t.width,x=y.bottom-y.top-t.height;g<0&&(v.left+=g,v.right+=g),x<0&&(v.top+=x,v.bottom+=x)}v.left+=n.left-t.width*d.left,v.top+=n.top-t.height*d.top,v.right+=n.right-t.width*(1-d.right),v.bottom+=n.bottom-t.height*(1-d.bottom)}a.offset=v},set:function(e){var t=e.coords,n=e.interaction,a=e.state,u=a.options,f=a.offset,p=Wt(u.restriction,n,t);if(p){var d=function(v){return!v||"left"in v&&"top"in v||((v=H({},v)).left=v.x||0,v.top=v.y||0,v.right=v.right||v.left+v.width,v.bottom=v.bottom||v.top+v.height),v}(p);t.x=Math.max(Math.min(d.right-f.right,t.x),d.left+f.left),t.y=Math.max(Math.min(d.bottom-f.bottom,t.y),d.top+f.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Na=zt(sr,"restrict"),Ii={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Pi={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Mi(e,t){for(var n=0,a=["top","left","bottom","right"];n<a.length;n++){var u=a[n];u in e||(e[u]=t[u])}return e}var Se={noInner:Ii,noOuter:Pi,start:function(e){var t,n=e.interaction,a=e.startOffset,u=e.state,f=u.options;f&&(t=Xe(Wt(f.offset,n,n.coords.start.page))),t=t||{x:0,y:0},u.offset={top:t.y+a.top,left:t.x+a.left,bottom:t.y-a.bottom,right:t.x-a.right}},set:function(e){var t=e.coords,n=e.edges,a=e.interaction,u=e.state,f=u.offset,p=u.options;if(n){var d=H({},t),v=Wt(p.inner,a,d)||{},y=Wt(p.outer,a,d)||{};Mi(v,Ii),Mi(y,Pi),n.top?t.y=Math.min(Math.max(y.top+f.top,d.y),v.top+f.top):n.bottom&&(t.y=Math.max(Math.min(y.bottom+f.bottom,d.y),v.bottom+f.bottom)),n.left?t.x=Math.min(Math.max(y.left+f.left,d.x),v.left+f.left):n.right&&(t.x=Math.max(Math.min(y.right+f.right,d.x),v.right+f.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Ua=zt(Se,"restrictEdges"),$a=H({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},sr.defaults),Ba=zt({start:sr.start,set:sr.set,defaults:$a},"restrictRect"),Ga={width:-1/0,height:-1/0},qa={width:1/0,height:1/0},Ha=zt({start:function(e){return Se.start(e)},set:function(e){var t=e.interaction,n=e.state,a=e.rect,u=e.edges,f=n.options;if(u){var p=Pr(Wt(f.min,t,e.coords))||Ga,d=Pr(Wt(f.max,t,e.coords))||qa;n.options={endOnly:f.endOnly,inner:H({},Se.noInner),outer:H({},Se.noOuter)},u.top?(n.options.inner.top=a.bottom-p.height,n.options.outer.top=a.bottom-d.height):u.bottom&&(n.options.inner.bottom=a.top+p.height,n.options.outer.bottom=a.top+d.height),u.left?(n.options.inner.left=a.right-p.width,n.options.outer.left=a.right-d.width):u.right&&(n.options.inner.right=a.left+p.width,n.options.outer.right=a.left+d.width),Se.set(e),n.options=f}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Wr={start:function(e){var t,n=e.interaction,a=e.interactable,u=e.element,f=e.rect,p=e.state,d=e.startOffset,v=p.options,y=v.offsetWithOrigin?function(T){var F=T.interaction.element,M=Xe(xt(T.state.options.origin,null,null,[F])),D=M||ve(T.interactable,F,T.interaction.prepared.name);return D}(e):{x:0,y:0};if(v.offset==="startCoords")t={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var g=xt(v.offset,a,u,[n]);(t=Xe(g)||{x:0,y:0}).x+=y.x,t.y+=y.y}var x=v.relativePoints;p.offsets=f&&x&&x.length?x.map(function(T,F){return{index:F,relativePoint:T,x:d.left-f.width*T.x+t.x,y:d.top-f.height*T.y+t.y}}):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,n=e.coords,a=e.state,u=a.options,f=a.offsets,p=ve(t.interactable,t.element,t.prepared.name),d=H({},n),v=[];u.offsetWithOrigin||(d.x-=p.x,d.y-=p.y);for(var y=0,g=f;y<g.length;y++)for(var x=g[y],T=d.x-x.x,F=d.y-x.y,M=0,D=u.targets.length;M<D;M++){var $=u.targets[M],z=void 0;(z=w.func($)?$(T,F,t._proxy,x,M):$)&&v.push({x:(w.number(z.x)?z.x:T)+x.x,y:(w.number(z.y)?z.y:F)+x.y,range:w.number(z.range)?z.range:u.range,source:$,index:M,offset:x})}for(var V={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},nt=0;nt<v.length;nt++){var ot=v[nt],Q=ot.range,it=ot.x-d.x,yt=ot.y-d.y,ft=ge(it,yt),Et=ft<=Q;Q===1/0&&V.inRange&&V.range!==1/0&&(Et=!1),V.target&&!(Et?V.inRange&&Q!==1/0?ft/Q<V.distance/V.range:Q===1/0&&V.range!==1/0||ft<V.distance:!V.inRange&&ft<V.distance)||(V.target=ot,V.distance=ft,V.range=Q,V.inRange=Et,V.delta.x=it,V.delta.y=yt)}return V.inRange&&(n.x=V.target.x,n.y=V.target.y),a.closest=V,V},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Ya=zt(Wr,"snap"),cr={start:function(e){var t=e.state,n=e.edges,a=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:a.offset||"self",origin:{x:0,y:0},range:a.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],Wr.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t=e.interaction,n=e.state,a=e.coords,u=n.options,f=n.offsets,p={x:a.x-f[0].x,y:a.y-f[0].y};n.options=H({},u),n.options.targets=[];for(var d=0,v=u.targets||[];d<v.length;d++){var y=v[d],g=void 0;if(g=w.func(y)?y(p.x,p.y,t):y){for(var x=0,T=n.targetFields;x<T.length;x++){var F=T[x],M=F[0],D=F[1];if(M in g||D in g){g.x=g[M],g.y=g[D];break}}n.options.targets.push(g)}}var $=Wr.set(e);return n.options=u,$},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Va=zt(cr,"snapSize"),Xr={aspectRatio:za,restrictEdges:Ua,restrict:Na,restrictRect:Ba,restrictSize:Ha,snapEdges:zt({start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],cr.start(e)):null},set:cr.set,defaults:H(ie(cr.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Ya,snapSize:Va,spring:ar,avoid:ar,transform:ar,rubberband:ar},Wa={id:"modifiers",install:function(e){var t=e.interactStatic;for(var n in e.usePlugin(fi),e.usePlugin(ka),t.modifiers=Xr,Xr){var a=Xr[n],u=a._defaults,f=a._methods;u._methods=f,e.defaults.perAction[n]=u}}},Xa=Wa,Ci=function(e){E(n,e);var t=k(n);function n(a,u,f,p,d,v){var y;if(l(this,n),Ze(A(y=t.call(this,d)),f),f!==u&&Ze(A(y),u),y.timeStamp=v,y.originalEvent=f,y.type=a,y.pointerId=me(u),y.pointerType=Vn(u),y.target=p,y.currentTarget=null,a==="tap"){var g=d.getPointerIndex(u);y.dt=y.timeStamp-d.pointers[g].downTime;var x=y.timeStamp-d.tapTime;y.double=!!d.prevTap&&d.prevTap.type!=="doubletap"&&d.prevTap.target===y.target&&x<500}else a==="doubletap"&&(y.dt=u.timeStamp-d.tapTime,y.double=!0);return y}return m(n,[{key:"_subtractOrigin",value:function(a){var u=a.x,f=a.y;return this.pageX-=u,this.pageY-=f,this.clientX-=u,this.clientY-=f,this}},{key:"_addOrigin",value:function(a){var u=a.x,f=a.y;return this.pageX+=u,this.pageY+=f,this.clientX+=u,this.clientY+=f,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),n}(tr),Te={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=Te,e.defaults.actions.pointerEvents=Te.defaults,H(e.actions.phaselessTypes,Te.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,a=e.pointer,u=e.event,f=e.eventTarget;e.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&Kr(e),Ut({interaction:n,pointer:a,event:u,eventTarget:f,type:"move"},t))},"interactions:down":function(e,t){(function(n,a){for(var u=n.interaction,f=n.pointer,p=n.event,d=n.eventTarget,v=n.pointerIndex,y=u.pointers[v].hold,g=gt(d),x={interaction:u,pointer:f,event:p,eventTarget:d,type:"hold",targets:[],path:g,node:null},T=0;T<g.length;T++){var F=g[T];x.node=F,a.fire("pointerEvents:collect-targets",x)}if(x.targets.length){for(var M=1/0,D=0,$=x.targets;D<$.length;D++){var z=$[D].eventable.options.holdDuration;z<M&&(M=z)}y.duration=M,y.timeout=setTimeout(function(){Ut({interaction:u,eventTarget:d,pointer:f,event:p,type:"hold"},a)},M)}})(e,t),Ut(e,t)},"interactions:up":function(e,t){Kr(e),Ut(e,t),function(n,a){var u=n.interaction,f=n.pointer,p=n.event,d=n.eventTarget;u.pointerWasMoved||Ut({interaction:u,eventTarget:d,pointer:f,event:p,type:"tap"},a)}(e,t)},"interactions:cancel":function(e,t){Kr(e),Ut(e,t)}},PointerEvent:Ci,fire:Ut,collectEventTargets:Fi,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Ut(e,t){var n=e.interaction,a=e.pointer,u=e.event,f=e.eventTarget,p=e.type,d=e.targets,v=d===void 0?Fi(e,t):d,y=new Ci(p,a,u,f,n,t.now());t.fire("pointerEvents:new",{pointerEvent:y});for(var g={interaction:n,pointer:a,event:u,eventTarget:f,targets:v,type:p,pointerEvent:y},x=0;x<v.length;x++){var T=v[x];for(var F in T.props||{})y[F]=T.props[F];var M=ve(T.eventable,T.node);if(y._subtractOrigin(M),y.eventable=T.eventable,y.currentTarget=T.node,T.eventable.fire(y),y._addOrigin(M),y.immediatePropagationStopped||y.propagationStopped&&x+1<v.length&&v[x+1].node!==y.currentTarget)break}if(t.fire("pointerEvents:fired",g),p==="tap"){var D=y.double?Ut({interaction:n,pointer:a,event:u,eventTarget:f,type:"doubletap"},t):y;n.prevTap=D,n.tapTime=D.timeStamp}return y}function Fi(e,t){var n=e.interaction,a=e.pointer,u=e.event,f=e.eventTarget,p=e.type,d=n.getPointerIndex(a),v=n.pointers[d];if(p==="tap"&&(n.pointerWasMoved||!v||v.downTarget!==f))return[];for(var y=gt(f),g={interaction:n,pointer:a,event:u,eventTarget:f,type:p,path:y,targets:[],node:null},x=0;x<y.length;x++){var T=y[x];g.node=T,t.fire("pointerEvents:collect-targets",g)}return p==="hold"&&(g.targets=g.targets.filter(function(F){var M,D;return F.eventable.options.holdDuration===((M=n.pointers[d])==null||(D=M.hold)==null?void 0:D.duration)})),g.targets}function Kr(e){var t=e.interaction,n=e.pointerIndex,a=t.pointers[n].hold;a&&a.timeout&&(clearTimeout(a.timeout),a.timeout=null)}var Ka=Object.freeze({__proto__:null,default:Te});function Za(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}var Ja={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(Te);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=Za,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;t.type==="hold"&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,a=e.pointerEvent,u=e.eventTarget,f=e.targets;if(a.type==="hold"&&f.length){var p=f[0].eventable.options.holdRepeatInterval;p<=0||(n.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:n,eventTarget:u,type:"hold",pointer:a,event:a},t)},p))}}})},Qa=Ja,ts={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=function(a){return H(this.events.options,a),this};var n=t.prototype._backCompatOption;t.prototype._backCompatOption=function(a,u){var f=n.call(this,a,u);return f===this&&(this.events.options[a]=u),f}},listeners:{"pointerEvents:collect-targets":function(e,t){var n=e.targets,a=e.node,u=e.type,f=e.eventTarget;t.interactables.forEachMatch(a,function(p){var d=p.events,v=d.options;d.types[u]&&d.types[u].length&&p.testIgnoreAllow(v,a,f)&&n.push({node:a,eventable:d,props:{interactable:p}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(n){return t.getRect(n)}},"interactable:set":function(e,t){var n=e.interactable,a=e.options;H(n.events.options,t.pointerEvents.defaults),H(n.events.options,a.pointerEvents||{})}}},es=ts,rs={id:"pointer-events",install:function(e){e.usePlugin(Ka),e.usePlugin(Qa),e.usePlugin(es)}},ns=rs,is={id:"reflow",install:function(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(n){return function(a,u,f){for(var p=a.getAllElements(),d=f.window.Promise,v=d?[]:null,y=function(){var x=p[g],T=a.getRect(x);if(!T)return 1;var F,M=be(f.interactions.list,function(z){return z.interacting()&&z.interactable===a&&z.element===x&&z.prepared.name===u.name});if(M)M.move(),v&&(F=M._reflowPromise||new d(function(z){M._reflowResolve=z}));else{var D=Pr(T),$=function(z){return{coords:z,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:D.x,y:D.y},client:{x:D.x,y:D.y},timeStamp:f.now()});F=function(z,V,nt,ot,Q){var it=z.interactions.new({pointerType:"reflow"}),yt={interaction:it,event:Q,pointer:Q,eventTarget:nt,phase:"reflow"};it.interactable=V,it.element=nt,it.prevEvent=Q,it.updatePointer(Q,Q,nt,!0),Gn(it.coords.delta),zr(it.prepared,ot),it._doPhase(yt);var ft=z.window,Et=ft.Promise,_t=Et?new Et(function(At){it._reflowResolve=At}):void 0;return it._reflowPromise=_t,it.start(ot,V,nt),it._interacting?(it.move(yt),it.end(Q)):(it.stop(),it._reflowResolve()),it.removePointer(Q,Q),_t}(f,a,x,u,$)}v&&v.push(F)},g=0;g<p.length&&!y();g++);return v&&d.all(v).then(function(){return a})}(this,n,e)}},listeners:{"interactions:stop":function(e,t){var n=e.interaction;n.pointerType==="reflow"&&(n._reflowResolve&&n._reflowResolve(),function(a,u){a.splice(a.indexOf(u),1)}(t.interactions.list,n))}}},os=is;if(mt.use(li),mt.use(gi),mt.use(ns),mt.use(wa),mt.use(Xa),mt.use(la),mt.use(Qo),mt.use(ea),mt.use(os),mt.default=mt,c(s)==="object"&&s)try{s.exports=mt}catch{}return mt.default=mt,mt})}(Ce,Ce.exports)),Ce.exports}var Gc=Bc();const qc=bc(Gc);document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("scene-container"),o=document.getElementById("dynamic-styles"),r=document.getElementById("generate-btn"),i=document.getElementById("prompt-input"),c=document.getElementById("chat-history"),l=document.getElementById("play-pause-btn"),h=document.getElementById("timeline-slider"),m=document.getElementById("time-display"),b=document.getElementById("duration-slider"),E=document.getElementById("duration-display"),S=document.getElementById("style-upload-btn"),_=document.getElementById("style-upload-input"),A=document.getElementById("style-thumbnail-container"),k=document.getElementById("export-btn");let I=null,R=[],N=null;async function B(){const q=i.value;if(!q)return;const Z=N,et=j();at(q,"user"),r.classList.add("loading"),r.textContent="Generating...",i.value="",N&&(N=null,A.innerHTML="",_.value="");try{const rt=await fetch("/.netlify/functions/generate-background",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:q,history:R.join(`
`),styleImage:Z,requestId:et})});if(!rt.ok)throw new Error(`HTTP error! status: ${rt.status}`);console.log("Background function started, polling for results..."),await W(et,q)}catch(rt){console.error("Error:",rt),at(`Sorry, something went wrong: ${rt.message}`,"ai"),r.classList.remove("loading"),r.textContent="Generate"}}function j(){return Math.random().toString(36).substring(2,11)+Date.now().toString(36)}async function W(q,Z){let rt=0;const st=async()=>{rt++;try{const ht=await fetch(`/.netlify/functions/get-result?requestId=${q}`);if(!ht.ok)throw new Error(`HTTP error! status: ${ht.status}`);const bt=await ht.json();if(bt.status==="pending")if(r.textContent=`Generating... (${rt}/60)`,rt<60)setTimeout(st,5e3);else throw new Error("Generation timed out");else if(bt.status==="completed"&&bt.result)U(bt.result),R.push(`User: ${Z}`),R.push("AI: (Generated new animation script)"),at("Animation updated.","ai"),r.classList.remove("loading"),r.textContent="Generate";else if(bt.status==="error")throw new Error(bt.error||"Generation failed")}catch(ht){console.error("Polling error:",ht),at(`Sorry, something went wrong: ${ht.message}`,"ai"),r.classList.remove("loading"),r.textContent="Generate"}};setTimeout(st,2e3)}function U({html:q,css:Z,js:et}){I&&I.destroy&&I.destroy(),s.innerHTML="",o.innerHTML=w(Z,"#scene-container"),s.innerHTML=q;try{if(I=new Function("Scene",et)(Un),!I||typeof I.on!="function")throw new Error("Generated script did not return a valid Scene.js instance.");const st=I.getDuration();b.value=st,E.textContent=`${Math.round(st)}s`,h.max=st,h.value=0,K(0),X(),I.pause(),l.textContent="",pt()}catch(rt){console.error("Error executing generated script:",rt),at(`There was an error in the generated animation code: ${rt.message}`,"ai")}}function X(){I.on("play",()=>l.textContent=""),I.on("paused",()=>l.textContent=""),I.on("ended",()=>l.textContent=""),I.on("timeupdate",q=>{h.value=q.time,K(q.time)})}async function ct(){if(!I){alert("Please generate an animation first.");return}const q=k.textContent;k.textContent="Recording...",k.disabled=!0;try{const Z=new Uc;Z.setAnimator(I);const et=await Z.record({format:"mp4"}),rt=URL.createObjectURL(et),st=document.createElement("a");st.href=rt,st.download="animation.mp4",document.body.appendChild(st),st.click(),document.body.removeChild(st),URL.revokeObjectURL(rt)}catch(Z){console.error("Recording failed:",Z),alert("Sorry, the animation could not be recorded. Please check the console for errors.")}finally{k.textContent=q,k.disabled=!1}}function w(q,Z){return q?q.replace(/([^{]+)({[^{}]*})/g,(et,rt,st)=>rt.trim().startsWith("@")?et:rt.split(",").map(ht=>`${Z} ${ht.trim()}`).join(", ")+st):""}function K(q){if(!I)return;const Z=I.getDuration();m.textContent=`${Y(q)} / ${Y(Z)}`}function Y(q){const Z=Math.floor(q),et=Math.floor(Z/60),rt=Z%60;return`${et.toString().padStart(1,"0")}:${rt.toString().padStart(2,"0")}`}function at(q,Z){const et=document.createElement("div");et.className=`chat-message ${Z}`,et.textContent=q,c.appendChild(et),c.scrollTop=c.scrollHeight}r.addEventListener("click",B),i.addEventListener("keyup",q=>q.key==="Enter"&&B()),l.addEventListener("click",()=>I&&(I.isPaused()?I.play():I.pause())),h.addEventListener("input",()=>I&&I.setTime(parseFloat(h.value))),b.addEventListener("input",()=>{const q=parseInt(b.value,10);E.textContent=`${q}s`,I&&(I.setDuration(q),h.max=q,K(I.getTime()))}),S.addEventListener("click",()=>_.click()),_.addEventListener("change",q=>{const Z=q.target.files[0];if(!Z)return;const et=new FileReader;et.onload=rt=>{N=rt.target.result,A.innerHTML=`<img src="${N}" alt="Style Thumbnail" /><div class="remove-style-btn"></div>`,A.querySelector(".remove-style-btn").addEventListener("click",()=>{N=null,A.innerHTML="",_.value=""})},et.readAsDataURL(Z)}),k.addEventListener("click",ct);function pt(){qc(".interactive").draggable({listeners:{move(q){const Z=q.target,et=(parseFloat(Z.getAttribute("data-x"))||0)+q.dx,rt=(parseFloat(Z.getAttribute("data-y"))||0)+q.dy;Z.style.transform=`translate(${et}px, ${rt}px)`,Z.setAttribute("data-x",et),Z.setAttribute("data-y",rt)}}})}E.textContent=`${b.value}s`,h.max=b.value,K(0)});
